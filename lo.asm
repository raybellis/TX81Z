;****************************************************
;* A09 Assembler options			    *
;****************************************************

			OPT	H03,NCL,NOW,EXP
FILCHR			TEXT	$FF

;****************************************************
;* Used Labels					    *
;****************************************************

			INCLUDE	"inc/hw.asm"
			INCLUDE	"inc/ram.asm"

; CPU RAM

M0051			EQU	$0051
M0052			EQU	$0052
M0056			EQU	$0056
M0058			EQU	$0058
M005A			EQU	$005A
M0077			EQU	$0077
M0079			EQU	$0079
M007B			EQU	$007B
M009A			EQU	$009A
M009F			EQU	$009F
M00A3			EQU	$00A3
M00A5			EQU	$00A5
M00A6			EQU	$00A6
M00A7			EQU	$00A7
M00A9			EQU	$00A9
M00AB			EQU	$00AB
M00AC			EQU	$00AC
M00C5			EQU	$00C5
M00C7			EQU	$00C7
M00CC			EQU	$00CC
M00CD			EQU	$00CD
M00CE			EQU	$00CE
M00CF			EQU	$00CF
M00D0			EQU	$00D0
M00D1			EQU	$00D1
M00D2			EQU	$00D2
M00D3			EQU	$00D3
M00D4			EQU	$00D4
M00D5			EQU	$00D5
M00D6			EQU	$00D6
M00D7			EQU	$00D7
M00D8			EQU	$00D8
M00D9			EQU	$00D9
M00DA			EQU	$00DA
M00DC			EQU	$00DC
M00DE			EQU	$00DE
M00F1			EQU	$00F1

; System RAM

M6001			EQU	$6001
M6974			EQU	$6974
M69C1			EQU	$69C1
M6A04			EQU	$6A04
M6A0A			EQU	$6A0A
M6A0B			EQU	$6A0B
M6A0D			EQU	$6A0D
M6A0E			EQU	$6A0E
M6A0F			EQU	$6A0F
M6A11			EQU	$6A11
M6A15			EQU	$6A15
M6A16			EQU	$6A16
M6A17			EQU	$6A17
M6A19			EQU	$6A19
M6A67			EQU	$6A67
M6AA5			EQU	$6AA5
M6AA6			EQU	$6AA6
M6AC0			EQU	$6AC0
M6DD7			EQU	$6DD7
M6E07			EQU	$6E07
M6E37			EQU	$6E37
M6E3A			EQU	$6E3A
M6E3B			EQU	$6E3B
M6E45			EQU	$6E45
M7565			EQU	$7565
M7566			EQU	$7566
M7567			EQU	$7567
M7568			EQU	$7568
M7569			EQU	$7569
M756A			EQU	$756A
M756B			EQU	$756B
M756C			EQU	$756C
M756D			EQU	$756D
M756E			EQU	$756E
M756F			EQU	$756F
M7571			EQU	$7571
M75F1			EQU	$75F1
M75F8			EQU	$75F8
M7628			EQU	$7628
M7640			EQU	$7640
M7740			EQU	$7740
M7750			EQU	$7750
M776C			EQU	$776C
M776D			EQU	$776D
M776E			EQU	$776E
M7770			EQU	$7770
M7772			EQU	$7772
M7773			EQU	$7773
M7774			EQU	$7774
M7779			EQU	$7779
M777A			EQU	$777A
M777B			EQU	$777B
M777C			EQU	$777C
M777E			EQU	$777E
M777F			EQU	$777F
M7781			EQU	$7781
M7784			EQU	$7784
M7787			EQU	$7787
M7788			EQU	$7788
M7789			EQU	$7789
M778A			EQU	$778A
M778B			EQU	$778B
M778C			EQU	$778C
M778D			EQU	$778D
M778F			EQU	$778F
M7791			EQU	$7791
M7792			EQU	$7792
M7793			EQU	$7793
M7794			EQU	$7794
M7795			EQU	$7795
M784E			EQU	$784E
M784F			EQU	$784F
M7933			EQU	$7933
M7D53			EQU	$7D53
M7D63			EQU	$7D63
M7D6B			EQU	$7D6B
M7D8B			EQU	$7D8B
M7DAB			EQU	$7DAB
M7DAC			EQU	$7DAC
M7DAD			EQU	$7DAD
M7DAE			EQU	$7DAE
M7DAF			EQU	$7DAF
M7DB0			EQU	$7DB0
M7DB1			EQU	$7DB1
M7DB2			EQU	$7DB2
M7DB3			EQU	$7DB3
M7DB4			EQU	$7DB4
M7DB5			EQU	$7DB5
M7DB6			EQU	$7DB6
M7DB7			EQU	$7DB7
M7DB8			EQU	$7DB8
M7DB9			EQU	$7DB9
M7DBA			EQU	$7DBA
M7DBB			EQU	$7DBB
M7DBF			EQU	$7DBF
M7DC0			EQU	$7DC0
M7DC1			EQU	$7DC1
M7DC3			EQU	$7DC3
M7DC4			EQU	$7DC4
M7DC5			EQU	$7DC5
M7DC6			EQU	$7DC6
M7DC7			EQU	$7DC7
M7DC8			EQU	$7DC8
M7DC9			EQU	$7DC9
M7DCA			EQU	$7DCA
M7DCB			EQU	$7DCB
M7E0C			EQU	$7E0C
M7EE8			EQU	$7EE8
M7F99			EQU	$7F99
M7FE0			EQU	$7FE0

;****************************************************
;* ROM Bank manipulation macros			    *
;****************************************************

BANK_HI			MACRO
&0			OIM	#$08,PORT6
			ENDM

BANK_SW			MACRO
&0			OIM	#$08,PORT6
			ENDM

;****************************************************
;* Program Code / Data Areas			    *
;****************************************************

			ORG	$8000

hdlr_RST		OIM	#$08,PORT6		; attempt to select HI bank
			LDAA	#$F8
			STAA	DDR6			; set P63 - P67 as outputs
			OIM	#$08,PORT6		; attempt to select HI bank (again)
			NOP
			NOP
			RTS

hdlr_SWI2		NOP
			OIM	#$08,PORT6		; select HI bank
			NOP				;
			NOP
			NOP
			NOP
			NOP
			NOP
			RTI

hdlr_CMI		NOP
			OIM	#$08,PORT6		; select HI bank
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			RTI

hdlr_DIV0		NOP
			OIM	#$08,PORT6		; select HI bank
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			RTI

hdlr_IRQ		NOP
			OIM	#$08,PORT6		; select HI bank
			NOP
			NOP
			NOP
			NOP
			NOP
			NOP
			RTI

			INCLUDE	"inc/xrom.asm"
			INCLUDE	"inc/init.asm"

			ORG	$8200

XROM_VEC2
M8200			FDB	hdlr_RST

; XROM jump table

XROM_VEC		FDB	LO_CALL_00,LO_CALL_01,LO_CALL_02,LO_CALL_03
			FDB	LO_CALL_04,LO_CALL_05,LO_CALL_06,LO_CALL_08
			FDB	LO_CALL_09,LO_CALL_0A,LO_CALL_0B,LO_CALL_0C
			FDB	LO_CALL_0D

LO_CALL_00		LDAB	#$04
Z821E			PSHB
			LDAB	#$06
			JSR	F_86B7
			LDX	M00A9
			LDAA	,X
			STAA	M009F
			LDAB	$03,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHB
			ANDB	#$07
			STAB	$06,X
			PULB
			ANDB	#$18
			LSRB
			LSRB
			LSRB
			STAB	,X
			ANDA	#$07
			STAA	$03,X
			LDAA	M009F
			ANDA	#$38
			LSRA
			LSRA
			LSRA
			STAA	$01,X
			LDAA	M009F
			ROLA
			ROLA
			ROLA
			ANDA	#$01
			STAA	$02,X
			LDAB	#$04
			ABX
			LDAB	#$02
			JSR	F_86B5
			LDX	M00A9
			INX
			STX	M00A9
			LDX	M00A7
			INX
			STX	M00A7
			PULB
			DECB
			BNE	Z821E
			STX	M00A7
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$07
			STAA	,X
			INX
			PULA
			LSRA
			LSRA
			LSRA
			PSHA
			ANDA	#$07
			STAA	,X
			PULA
			ANDA	#$08
			LSRA
			LSRA
			LSRA
			STAA	$05,X
			INX
			LDAB	#$04
			JSR	F_86B5
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			INX
			PSHA
			ANDA	#$03
			STAA	,X
			PULA
			LSRA
			LSRA
			PSHA
			ANDA	#$03
			STAA	$02,X
			PULA
			LSRA
			LSRA
			STAA	$01,X
			INX
			INX
			INX
			LDAB	#$01
			JSR	F_86B5
			TST	M756E
			BNE	Z82CA
			LDAB	#$0E
			ABX
			STX	M00A7
			LDX	M00A9
			LDAB	#$0A
			ABX
			STX	M00A9
			JMP	Z8310
Z82CA			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			STAA	$01,X
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$01
			STAA	$02,X
			PULA
			LSRA
			PSHA
			ANDA	#$01
			STAA	$06,X
			PULA
			LSRA
			PSHA
			ANDA	#$01
			STAA	$05,X
			PULA
			LSRA
			PSHA
			ANDA	#$01
			STAA	,X
			PULA
			LSRA
			ANDA	#$01
			STAA	$07,X
			INX
			INX
			INX
			LDAB	#$02
			JSR	F_86B5
			INX
			INX
			INX
			STX	M00A7
			LDAB	#$06
			JSR	F_86B7
Z8310			LDAB	#$0A
			JSR	F_86B7
			LDAB	#$04
Z8317			PSHB
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$07
			STAA	$01,X
			PULA
			LSRA
			LSRA
			LSRA
			PSHA
			ANDA	#$01
			STAA	,X
			PULA
			LSRA
			ANDA	#$03
			STAA	$04,X
			INX
			INX
			STX	M00A7
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$0F
			STAA	,X
			PULA
			LSRA
			LSRA
			LSRA
			LSRA
			ANDA	#$07
			STAA	$01,X
			INX
			INX
			INX
			STX	M00A7
			PULB
			DECB
			BNE	Z8317
			TST	M756E
			BNE	Z8378
			LDX	M00A7
			LDAB	#$03
			ABX
			STX	M00A7
			LDX	M00A9
			ABX
			STX	M00A9
			LDAA	M7772
			ANDA	#$04
			BNE	Z837D
			LDAA	#$01
			STAA	M7792
			BRA	Z837D
Z8378			LDAB	#$03
			JSR	F_86B7
Z837D			RTS
LO_CALL_06		LDAB	#$04
Z8380			PSHB
			LDAB	#$06
			JSR	F_86B7
			LDX	M00A9
			LDAA	,X
			ASLA
			ASLA
			ASLA
			ADDA	$06,X
			INX
			STX	M00A9
			LDX	M00A7
			STAA	$03,X
			LDX	M00A9
			LDAA	$01,X
			ASLA
			ASLA
			ASLA
			ADDA	,X
			ASLA
			ASLA
			ASLA
			ADDA	$02,X
			INX
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			LDAB	#$02
			JSR	F_86B5
			LDX	M00A9
			INX
			STX	M00A9
			LDX	M00A7
			INX
			STX	M00A7
			PULB
			DECB
			BNE	Z8380
			STX	M00A7
			LDX	M00A9
			LDAA	$06,X
			ASLA
			ASLA
			ASLA
			ADDA	$01,X
			ASLA
			ASLA
			ASLA
			ADDA	,X
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			LDAB	#$04
			JSR	F_86B5
			LDX	M00A9
			INX
			LDAA	$01,X
			ASLA
			ASLA
			ADDA	$02,X
			ASLA
			ASLA
			ADDA	,X
			INX
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			LDAB	#$01
			JSR	F_86B5
			LDX	M00A9
			LDAA	$01,X
			LDX	M00A7
			STAA	,X
			INX
			STX	M00A7
			LDX	M00A9
			LDAA	$07,X
			ASLA
			ADDA	,X
			ASLA
			ADDA	$05,X
			ASLA
			ADDA	$06,X
			ASLA
			ADDA	$02,X
			INX
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			LDAB	#$02
			JSR	F_86B5
			LDX	M00A9
			INX
			INX
			INX
			STX	M00A9
			LDAB	#$10
			JSR	F_86B7
			LDAB	#$04
Z8433			PSHB
			LDX	M00A9
			LDAA	$04,X
			ASLA
			ADDA	,X
			ASLA
			ASLA
			ASLA
			ADDA	$01,X
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			STX	M00A7
			LDX	M00A9
			LDAA	$01,X
			ASLA
			ASLA
			ASLA
			ASLA
			ADDA	,X
			INX
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			STX	M00A7
			PULB
			DECB
			BNE	Z8433
			LDAB	#$03
			JSR	F_86B7
			RTS
LO_CALL_05		LDAB	#$08
Z846D			PSHB
			LDX	M00A9
			LDAA	,X
			LDAB	$01,X
			ANDB	#$7F
			INX
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$0F
			STAA	,X
			PULA
			LSRA
			LSRA
			LSRA
			LSRA
			PSHA
			ANDA	#$01
			BEQ	Z848D
			ORAB	#$80
Z848D			STAB	$02,X
			PULA
			LSRA
			ANDA	#$03
			STAA	$09,X
			INX
			INX
			INX
			STX	M00A7
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$1F
			STAA	,X
			PULA
			LSRA
			LSRA
			LSRA
			LSRA
			LSRA
			ANDA	#$03
			STAA	$07,X
			INX
			LDAB	#$03
			JSR	F_86B5
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$3F
			STAA	,X
			PULA
			LSRA
			LSRA
			LSRA
			LSRA
			LSRA
			LSRA
			ANDA	#$01
			STAA	$04,X
			INX
			LDAB	#$01
			JSR	F_86B5
			INX
			INX
			INX
			STX	M00A7
			PULB
			DECB
			BNE	Z846D
			LDAB	#$01
			JSR	F_86B7
			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			PSHA
			ANDA	#$01
			STAA	,X
			PULA
			LSRA
			PSHA
			ANDA	#$03
			STAA	$01,X
			PULA
			LSRA
			LSRA
			ANDA	#$0F
			STAA	$02,X
			INX
			INX
			INX
			LDAB	#$0A
			JMP	F_86B5
LO_CALL_08		LDAB	#$08
Z850B			PSHB
			LDX	M00A9
			LDAA	$09,X
			ASLA
			TIM	#$80,$02,X
			BEQ	Z8518
			ADDA	#$01
Z8518			ASLA
			ASLA
			ASLA
			ASLA
			ADDA	,X
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			STX	M00A7
			LDX	M00A9
			LDAA	,X
			ANDA	#$7F
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			STX	M00A7
			LDX	M00A9
			LDAA	$07,X
			ASLA
			ASLA
			ASLA
			ASLA
			ASLA
			ADDA	,X
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			LDAB	#$03
			JSR	F_86B5
			LDX	M00A9
			LDAA	$04,X
			ASLA
			ASLA
			ASLA
			ASLA
			ASLA
			ASLA
			ADDA	,X
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			LDAB	#$01
			JSR	F_86B5
			LDX	M00A9
			INX
			INX
			INX
			STX	M00A9
			PULB
			DECB
			BNE	Z850B
			LDAB	#$01
			JSR	F_86B7
			LDX	M00A9
			LDAA	$02,X
			ASLA
			ASLA
			ADDA	$01,X
			ASLA
			ADDA	,X
			INX
			INX
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			LDAB	#$0A
			JMP	F_86B5
LO_CALL_09		CLR	>M009F
Z8597			JSR	LO_CALL_0D
			LDAB	M009F
			INCB
			STAB	M009F
			CMPB	#$08
			BNE	Z8597
LO_CALL_0B		LDX	#M6DD7
			LDAB	#$08
			STX	M00A9
Z85AA			LDX	#D871F
			STX	M00A7
			PSHB
			LDAB	#$0C
			BSR	F_862F
			PULB
			DECB
			BNE	Z85AA
			LDAB	#$04
			BSR	F_862F
			JSR	LO_CALL_0A
			LDX	#M6DD7
			CLRA
			LDAB	#$0C
Z85C5			ADDA	,X
			CMPA	#$09
			BCS	Z85CD
			CLR	,X
Z85CD			ABX
			CPX	#M6E37
			BNE	Z85C5
			RTS
LO_CALL_0A		LDAB	#$0A
Z85D6			LDAA	#$7F
			LDX	M00A9
			CMPA	,X
			BCC	Z85E0
			STAA	,X
Z85E0			LDAA	#$1F
			CMPA	,X
			BCS	Z85EA
			LDAA	#$24
			STAA	,X
Z85EA			INX
			STX	M00A9
			DECB
			BNE	Z85D6
			RTS
D85F1			FCB	$1F,$1F,$1F,$0F,$0F,$63,$03,$07,$01,$07,$63,$3F,$06
			FCB	$07,$07,$63,$63,$63,$63,$01,$03,$07,$03,$30,$01,$0C
			FCB	$01,$63,$63,$01,$01,$01,$63,$63,$63,$63,$64,$63
D8716			FCB	$01,$07,$0F,$07,$03,$07,$63,$63
D871F			FCB	$08,$00,$9F,$10,$7F,$7F,$0E,$30,$63,$03,$03,$01,$0C
			FCB	$01,$03,$0B

F_862F			LDX	M00A7
			LDAA	,X
			INX
			STX	M00A7
			LDX	M00A9
			CMPA	,X
			BCC	Z863E
			STAA	,X
Z863E			INX
			STX	M00A9
			DECB
			BNE	F_862F
			RTS
LO_CALL_0D		LDAB	M009F
			LDAA	#$6E
			MUL
			ADDD	#M6A67
			STD	M00A9
			CLRB
Z8650			LDX	#D85F1
			STX	M00A7
			PSHB
			LDAB	#$03
			JSR	F_862F
			TST	,X
			BNE	Z8663
			LDAA	#$01
			STAA	,X
Z8663			LDAB	#$08
			JSR	F_862F
			TIM	#$3C,$00,X
			BNE	Z8686
			LDAA	#$6E
			LDAB	M009F
			MUL
			ADDD	#M6AC0
			XGDX
			PULB
			PSHB
			LDAA	#$05
			MUL
			ABX
			LDAA	,X
			CMPA	#$08
			BCS	Z8684
			LDAA	#$07
Z8684			STAA	,X
Z8686			LDAB	#$02
			JSR	F_862F
			PULB
			INCB
			CMPB	#$04
			BNE	Z8650
			LDAB	#$19
			JSR	F_862F
			JSR	LO_CALL_0A
			LDAB	#$04
Z869B			LDX	#D8716
			STX	M00A7
			PSHB
			LDAB	#$05
			JSR	F_862F
			PULB
			DECB
			BNE	Z869B
			LDX	M00A9
			DEX
			CLR	,X
			LDAB	#$03
			JSR	F_862F
			RTS

F_86B5			STX	M00A7
F_86B7			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			STAA	,X
			INX
			STX	M00A7
			DECB
			BNE	F_86B7
			RTS

LO_CALL_03		TST	M756C
			BEQ	Z870C
			TST	>M00CC
			BNE	Z870C
			JSR	HI_CALL_00
			JSR	HI_CALL_01
			CLR	>M005A
			JSR	F_9B4A
			STX	M00A7
			LDX	#S_TRANSMITTING
			JSR	F_9BC4
			CLR	>M00C7
			JSR	HI_CALL_0E
Z86ED			LDAA	M777E
			DECA
			LDAB	#$20
			MUL
			ADDB	M00C7
			LDAA	#$4E
			MUL
			ADDD	#PRESET_VOICE
			XGDX
			JSR	F_9ACD
			LDAB	M00C7
			INCB
			STAB	M00C7
			CMPB	#$20
			BNE	Z86ED
			JSR	HI_CALL_10
Z870C			RTS

S_TRANSMITTING		FCC	"Transmitting!!  "
			FCB	$00

LO_CALL_04		LDAA	#$01
			STAA	M7791
			LDAA	M777E
			LDAB	#$4C
			MUL
			ADDD	#STANDARD_PFM
			XGDX
			STX	M00A9
			AIM	#$BF,TCSR3
			LDX	#M6DD7
			STX	M00A7
			JSR	LO_CALL_05
			JSR	HI_CALL_13
			JSR	HI_CALL_14
			RTS

F_8741			CLRB
Z8742 			PSHB
			LDX	#D_876B
			ABX
			LDAA	,X
			CMPA	#$80
			BCS	Z874E
			CLRA
Z874E			LDAB	#$4E
			MUL
			ADDD	#PRESET_VOICE
			STD	M00A9
			PULB
			PSHB
			LDAA	#$4E
			MUL
			ADDD	#M6001
			XGDX
			LDAB	#$4E
			JSR	F_86B5
			PULB
			INCB
			CMPB	#$20
			BNE	Z8742
			RTS

D_876B			FCB	$00,$08,$0C,$10,$18,$1E,$20,$22,$29,$2F,$30,$34,$37
			FCB	$3C,$3F,$40,$41,$43,$48,$4A,$4E,$55,$57,$59,$60,$61
			FCB	$64,$67,$6F,$79,$7A,$7D

F_878B			CLRB
			LDX	#M6E45
			STX	M00A7
Z8791			PSHB
			LDAA	#$4C
			MUL
			ADDD	#PRESET_PFM
			STD	M00A9
			LDAB	#$4C
			JSR	F_86B7
			PULB
			INCB
			CMPB	#$18
			BNE	Z8791
			RTS

; Standard performance settings  - 5 x 76 bytes per mode
STANDARD_PFM		FCB	$68,$00,$20,$00,$7F,$07,$18,$63,$60,$00,$41,$00,$7F
			FCB	$07,$18,$63,$60,$00,$62,$00,$7F,$07,$18,$63,$60,$00
			FCB	$63,$00,$7F,$07,$18,$63,$60,$00,$64,$00,$7F,$07,$18
			FCB	$63,$60,$00,$65,$00,$7F,$07,$18,$63,$60,$00,$66,$00
			FCB	$7F,$07,$18,$63,$60,$00,$67,$00,$7F,$07,$18,$63,$00
			FCB	$00
			FCC	"SINGLE    "
			FCB	$64,$00,$20,$00,$7F,$07,$18,$63,$64,$00,$40,$00,$7F
			FCB	$09,$18,$63,$60,$00,$62,$00,$7F,$07,$18,$63,$60,$00
			FCB	$63,$00,$7F,$07,$18,$63,$60,$00,$64,$00,$7F,$07,$18
			FCB	$63,$60,$00,$65,$00,$7F,$07,$18,$63,$60,$00,$66,$00
			FCB	$7F,$07,$18,$63,$60,$00,$67,$00,$7F,$07,$18,$63,$00
			FCB	$00
			FCC	"DUAL	   "
			FCB	$64,$00,$20,$3C,$7F,$07,$18,$63,$64,$00,$40,$00,$3B
			FCB	$07,$18,$63,$60,$00,$62,$00,$7F,$07,$18,$63,$60,$00
			FCB	$63,$00,$7F,$07,$18,$63,$60,$00,$64,$00,$7F,$07,$18
			FCB	$63,$60,$00,$65,$00,$7F,$07,$18,$63,$60,$00,$66,$00
			FCB	$7F,$07,$18,$63,$60,$00,$67,$00,$7F,$07,$18,$63,$00
			FCB	$00
			FCC	"SPLIT	   "
			FCB	$61,$00,$20,$00,$7F,$07,$18,$63,$61,$01,$41,$00,$7F
			FCB	$07,$18,$63,$61,$02,$62,$00,$7F,$07,$18,$63,$61,$03
			FCB	$63,$00,$7F,$07,$18,$63,$61,$04,$64,$00,$7F,$07,$18
			FCB	$63,$61,$05,$65,$00,$7F,$07,$18,$63,$61,$06,$66,$00
			FCB	$7F,$07,$18,$63,$61,$07,$67,$00,$7F,$07,$18,$63,$00
			FCB	$00
			FCC	"MONO8	   "
			FCB	$62,$00,$20,$00,$7F,$07,$18,$63,$62,$01,$41,$00,$7F
			FCB	$07,$18,$63,$62,$02,$62,$00,$7F,$07,$18,$63,$62,$03
			FCB	$63,$00,$7F,$07,$18,$63,$60,$04,$64,$00,$7F,$07,$18
			FCB	$63,$60,$05,$65,$00,$7F,$07,$18,$63,$60,$06,$66,$00
			FCB	$7F,$07,$18,$63,$60,$07,$67,$00,$7F,$07,$18,$63,$00
			FCB	$00
			FCC	"POLY4	   "

LO_CALL_01		JSR	F_8EBE
			LDAB	M7789
			CMPB	#$0B
			BCS	Z892F
			JMP	Z8A4F
Z892F			JSR	JMPOFFB
			FCB	$1F,$10,$0C,$08,$17,$0C,$08,$04,$0C,$08,$04
J893D			JMP	Z8D3E
J8940			JMP	Z8B4A
J8943			JMP	Z8ABD
J8946			LDAB	M777E
			ADDB	#$03
			BRA	Z895B
J894D			LDAB	#$02
			BRA	Z895B
J8951			TST	M777E
			BEQ	Z8959
			CLRB
			BRA	Z895B
Z8959			LDAB	#$01
Z895B			STAB	M00D7
			JSR	F_8EF2
			JSR	F_9B4A
			STX	M00A7
			LDX	#S_SAVE
			JSR	PUTSTRX
			JSR	F_8EB0
Z896E			JSR	HI_CALL_17
			CMPB	#$02
			BNE	Z8978
			JMP	Z8A4F
Z8978			CMPB	#$01
			BNE	Z896E
			JSR	F_9B4A
			STX	M00A7
			CLR	M6A15
			LDAB	M00D7
Z8986			ASLB
			LDX	#DVEC_M8A6E
			ABX
			LDX	,X
			JSR	PUTSTRX
			LDX	#S_TO_TAPE
			JSR	F_9BC4
			LDAB	#$04
			LDX	#$0000
Z899B			TIM	#$20,PORT5
			BEQ	Z89F1
			DEX
			BNE	Z899B
			DECB
			BNE	Z899B
			LDAA	M00D7
			CMPA	#$03
			BCS	Z89B1
			CLR	>M00CD
			BRA	Z89C1
Z89B1			CLRA
			STAA	M00CD
Z89B4			LDX	#M7DC0
			STX	M00A7
			INCA
			CLRB
			JSR	F_9BD1
			JSR	F_9B87
Z89C1			LDAA	M00CD
			JSR	F_903F
			LDAA	M00CD
			JSR	F_8A7E
			JSR	F_92F3
			STD	M6A17
			PSHB
			LDAB	M00D7
			CMPB	#$01
			BEQ	Z89E8
			CMPB	#$02
			BNE	Z89E2
			PULB
			STD	M6A0F
			BRA	Z89E9
Z89E2			PULB
			STD	M6A0B
			BRA	Z89E9
Z89E8			PULB
Z89E9			JSR	F_931B
			TST	>M00D3
			BEQ	Z89F3
Z89F1			BRA	Z8A51
Z89F3			LDAA	M00CD
			INCA
			STAA	M00CD
			LDAB	M00D7
			JSR	JMPOFFB
			FCB	$08,$07,$0A,$0F,$36,$2D,$34,$2F
J8A05			CMPA	#$20
			BRA	Z8A0B
J8A09			CMPA	#$18
Z8A0B			BNE	Z89B4
			BRA	J8A37
			LDAB	M6A15
			CMPB	#$02
			BEQ	J8A33
			CMPB	#$01
			BEQ	Z8A1E
			CMPA	#$04
			BNE	Z89C1
Z8A1E			JSR	F_9B4A
			STX	M00A7
			LDAB	M6A15
			INCB
			STAB	M6A15
			ADDB	#$05
			JMP	Z8986
J8A2F			CMPA	#$04
			BRA	Z8A35
J8A33			CMPA	#$05
Z8A35			BNE	Z89C1
J8A37			JSR	HI_CALL_06
			LDAA	M00D7
			CMPA	#$02
			BEQ	Z8A46
			BCS	Z8A4A
			LDAA	#$09
			BRA	Z8A4C
Z8A46			LDAA	#$05
			BRA	Z8A4C
Z8A4A			LDAA	#$01
Z8A4C			STAA	M7789
Z8A4F			CLI
			RTS
Z8A51			LDAA	M00D7
			CMPA	#$02
			BCS	Z8A63
			LDAA	M777E
			DECA
			CMPA	#$05
			BCS	Z8A69
			LDAA	#$04
			BRA	Z8A69
Z8A63			LDAA	M777E
			INCA
			ANDA	#$01
Z8A69			STAA	M777E
			BRA	Z8A4F

DVEC_M8A6E		FDB	S_INT
			FDB	S_INT
			FDB	S_PFM_2
			FDB	S_PGM_CNG
			FDB	S_SYSTEM
			FDB	S_PGM_CNG
			FDB	S_EFFECT
			FDB	S_MICROTUN

F_8A7E			LDAA	M00CD
			LDAB	M00D7
			CMPB	#$08
			BCS	Z8A87
			CLRB
Z8A87			JSR	JMPOFFB
			FCB	$2C,$07,$0A,$10,$1A,$1D,$20,$23
J8A92			ADDA	#$20
			BRA	J8AB6
			ADDA	#$40
			STAA	M6A0E
			BRA	J8AB6
J8A9D			LDAB	M6A15
			BEQ	J8AAC
			CMPB	#$01
			BEQ	J8AB0
			BRA	J8AB4
J8AA8			LDAA	#$60
			BRA	J8AB6
J8AAC			ADDA	#$61
			BRA	J8AB6
J8AB0			LDAA	#$65
			BRA	J8AB6
J8AB4			ADDA	#$66
J8AB6			STAA	M6A0A
			STAA	M6A16
			RTS
Z8ABD			JSR	F_9B4A
			STX	M00A7
			LDX	#S_VERIFY
			JSR	PUTSTRX
			JSR	F_8EB0
Z8ACB			JSR	HI_CALL_17
			CMPB	#$02
			BEQ	Z8B47
			CMPB	#$01
			BNE	Z8ACB
			CLR	M6A15
			JSR	F_9B4A
			STX	M00A7
			LDX	#S_VERIFY_TAPE
			JSR	PUTSTRX
			LDAB	M7789
			ANDB	#$0C
			CMPB	#$08
			BNE	Z8AF5
			LDX	#M7DC8
			STX	M00A7
			JSR	F_8C1C
Z8AF5			CLRA
			STAA	M00CD
Z8AF8			JSR	F_8C82
			BCC	Z8B34
			LDAA	M00D3
			CMPA	#$03
			BNE	Z8B0B
			JSR	F_8EF2
			CLR	>M00D3
			BRA	Z8AF5
Z8B0B			JSR	F_9207
			BNE	Z8B44
			LDAA	M00CD
			BNE	Z8B19
			JSR	F_8EF2
			LDAA	M00CD
Z8B19			INCA
			STAA	M00CD
			JSR	F_8C34
			BCC	Z8AF8
			LDX	#M7DBB
			STX	M00A7
			LDX	#S_VERIFY_COMPLETED
			JSR	F_9BC4
			JSR	HI_CALL_0D
			CLI
			LDAA	#$01
			STAA	M00CE
Z8B34			LDAA	M777E
			ANDA	#$0F
			DECA
			CMPA	#$05
			BCS	Z8B40
			LDAA	#$04
Z8B40			STAA	M777E
			RTS
Z8B44			JMP	Z8CE9
Z8B47			JMP	Z8D03
Z8B4A			TST	M756D
			BEQ	Z8B52
			JMP	Z8C0D
Z8B52			LDX	#M7DBB
			STX	M00A7
			LDAB	M7789
			CMPB	#$0A
			BNE	Z8B63
			LDX	#S_LOAD_READY
			BRA	Z8B66
Z8B63			LDX	#S_LOAD_ALL_READY
Z8B66			JSR	F_9BC4
Z8B69			JSR	HI_CALL_17
			CMPB	#$02
			BNE	Z8B73
			JMP	Z8C0A
Z8B73			CMPB	#$01
			BNE	Z8B69
			JSR	F_9B4A
			STX	M00A7
			CLR	M6A15
			LDAB	M7789
			ANDB	#$0C
			BEQ	Z8B9A
			CMPB	#$04
			BEQ	Z8B95
			LDX	#S_TAPE_TO
			JSR	PUTSTRX
			JSR	F_8C1C
			BRA	Z8BA0
Z8B95			LDX	#S_TAPE_TO_PFM
			BRA	Z8B9D
Z8B9A			LDX	#S_TAPE_TO_INT
Z8B9D			JSR	F_9BC4
Z8BA0			CLR	>M00D3
			CLRA
			STAA	M00CD
Z8BA6			JSR	F_8C82
			BCC	Z8B34
			LDAA	M00D3
			CMPA	#$03
			BNE	Z8BB6
			JSR	F_8EF2
			BRA	Z8BA0
Z8BB6			LDAA	M00CD
			JSR	F_90F5
			LDAA	M00CD
			BNE	Z8BC4
			JSR	F_8EF2
			LDAA	M00CD
Z8BC4			INCA
			STAA	M00CD
			JSR	F_8C34
			BCC	Z8BA6
			LDX	#M7DBB
			STX	M00A7
			LDX	#S_LOAD_COMPLETED
			JSR	F_9BC4
			CLI
			LDAB	M00D7
			CMPB	#$02
			BCS	Z8C01
			BEQ	Z8BFE
			JSR	HI_CALL_09
			JSR	HI_CALL_00
			JSR	HI_CALL_01
			JSR	HI_CALL_0F
			JSR	HI_CALL_18
			JSR	HI_CALL_11
			AIM	#$BF,TCSR3
			JSR	HI_CALL_15
			JSR	HI_CALL_16
			OIM	#$40,TCSR3
Z8BFE			JMP	Z8CF5
Z8C01			JSR	HI_CALL_1B
			JSR	HI_CALL_04
			JMP	Z8CF5
Z8C0A			JMP	Z8D03
Z8C0D			JSR	F_9B4A
			STX	M00A7
			LDX	#S_MEM_PROTECTED
			JSR	F_9BC4
			CLI
			JMP	Z8CF5

F_8C1C			LDAB	M777E
			ASLB
			LDX	#DVEC_M8C2A
			ABX
			LDX	,X
			JSR	F_9BC4
			RTS

DVEC_M8C2A		FDB	S_ALL
			FDB	S_SYS
			FDB	S_PC
			FDB	S_EF
			FDB	S_MC

F_8C34			LDAB	M00D7
			JSR	JMPOFFB
			FCB	$08,$07,$0A,$0F,$43,$0D,$14,$0F
J8C41			CMPA	#$20
			BRA	Z8C47
J8C45			CMPA	#$18
Z8C47			BNE	Z8C7D
			BRA	J8C80
J8C4B			CMPA	#$04
			BRA	Z8C51
J8C4F			CMPA	#$05
Z8C51			BNE	Z8C7D
J8C53			LDAB	M777E
			ANDB	#$0F
			BNE	J8C80
			LDAB	M777E
			LDAA	M00D7
			CMPA	#$05
			BNE	Z8C67
			ORAB	#$20
			BRA	Z8C71
Z8C67			CMPA	#$06
			BNE	Z8C6F
			ORAB	#$40
			BRA	Z8C71
Z8C6F			ORAB	#$80
Z8C71			STAB	M777E
			ANDB	#$E0
			CMPB	#$E0
			BEQ	J8C80
			CLRA
			STAA	M00CD
Z8C7D			CLC
			BRA	Z8C81
J8C80			SEC
Z8C81			RTS

F_8C82			LDAB	M7789
			ANDB	#$0C
			CMPB	#$08
			BEQ	Z8C98
			LDX	#M7DC8
			STX	M00A7
			INCA
			CLRB
			JSR	F_9BD1
			JSR	F_9B87
Z8C98			JSR	F_93D6
			LDAA	M00D3
			CMPA	#$02
			BCC	Z8CE9
			CMPA	#$01
			BEQ	Z8D03
			JSR	F_8ED4
			JSR	F_8D11
			LDAA	M00D3
			CMPA	#$03
			BEQ	Z8CE7
			LDAB	M00D7
			CMPB	#$03
			BCS	Z8CD3
			CMPB	#$04
			BNE	Z8CBF
			LDAB	#$60
			BRA	Z8CDA
Z8CBF			CMPB	#$05
			BNE	Z8CC7
			LDAB	#$61
			BRA	Z8CD8
Z8CC7			CMPB	#$06
			BNE	Z8CCF
			LDAB	#$65
			BRA	Z8CDA
Z8CCF			LDAB	#$66
			BRA	Z8CD8
Z8CD3			LDAA	#$20
			LDAB	M00D7
			MUL
Z8CD8			ADDB	M00CD
Z8CDA			CMPB	M6A16
			BNE	Z8CE9
			JSR	F_92F3
			SUBD	M6A17
			BNE	Z8CE9
Z8CE7			SEC
			RTS
Z8CE9			LDX	#M7DC7
			STX	M00A7
			LDX	#S_ERR
			JSR	F_9BC4
			CLI
Z8CF5			LDAA	#$01
			STAA	M00CE
			LDAA	M777E
			ANDA	#$0F
			STAA	M777E
			CLC
			RTS
Z8D03			CLI
			CLR	>M00CE
			LDAA	M777E
			ANDA	#$0F
			STAA	M777E
			CLC
			RTS

F_8D11			LDAB	M7789
			ANDB	#$0C
			LDAA	M00D7
			CMPA	#$02
			BEQ	Z8D27
			BHI	Z8D2D
			TSTB
			BEQ	Z8D3D
Z8D21			LDAA	#$03
			STAA	M00D3
			BRA	Z8D3D
Z8D27			CMPB	#$04
			BNE	Z8D21
			BRA	Z8D3D
Z8D2D			CMPB	#$08
			BNE	Z8D21
			LDAB	M777E
			ANDB	#$0F
			BEQ	Z8D3D
			ADDB	#$03
			SBA
			BNE	Z8D21
Z8D3D			RTS

Z8D3E			JSR	F_9B4A
			STX	M00A7
			LDX	#S_TAPE_TO_BUFF
			JSR	F_9BC4
Z8D49			JSR	HI_CALL_17
			CMPB	#$02
			BNE	Z8D53
			JMP	Z8EA8
Z8D53			JSR	JMPOFF1
D8D56			FCB	$06,$08,$06,$0A,$02,$00
J8D5C			BRA	Z8D49
J8D5E			CLRA
Z8D5F			LDAB	#$02
Z8D61			LDX	#$A000
Z8D64			DEX
			BNE	Z8D64
			DECB
			BNE	Z8D61
			STAA	M7EE8
			LDX	#M7DC0
			STX	M00A7
			INCA
			CLRB
			JSR	F_9BD1
			JSR	F_9B87
Z8D7A			JSR	HI_CALL_17
			CMPB	#$02
			BNE	Z8D84
			JMP	Z8EA8
Z8D84			CMPB	#$01
			BEQ	Z8DC3
			JSR	JMPOFF1
D8D8B			FCB	$06,$08,$06,$0A,$02,$00
J8D91			BRA	Z8D7A
J8D93			LDAA	M7EE8
			CMPB	#$08
			BEQ	Z8DAF
			INCA
			LDAB	M7789
			ANDB	#$0C
			CMPB	#$04
			BNE	Z8DA8
			CMPA	#$18
			BRA	Z8DAA
Z8DA8			CMPA	#$20
Z8DAA			BCS	Z8DC1
			CLRA
			BRA	Z8DC1
Z8DAF			DECA
			BPL	Z8DC1
			LDAB	M7789
			ANDB	#$0C
			CMPB	#$04
			BNE	Z8DBF
			LDAA	#$17
			BRA	Z8DC1
Z8DBF			LDAA	#$1F
Z8DC1			BRA	Z8D5F
Z8DC3			CLR	>M00D3
			JSR	F_9B4A
			STX	M00A7
			LDX	#S_SEARCH_TAPE
			JSR	F_9BC4
			LDX	#M7DC8
			STX	M00A7
			LDAA	M7EE8
			INCA
			CLRB
			JSR	F_9BD1
			JSR	F_9B87
Z8DE1			CLRA
			STAA	M00CD
Z8DE4			JSR	F_93D6
			LDAA	M00D3
			CMPA	#$02
			BCS	Z8DF0
			JMP	Z8EAD
Z8DF0			CMPA	#$01
			BNE	Z8DF7
			JMP	Z8EA8
Z8DF7			JSR	F_8ED4
			JSR	F_8D11
			LDAA	M00D3
			CMPA	#$03
			BNE	Z8E0B
			JSR	F_8EF2
			CLR	>M00D3
			BRA	Z8DE1
Z8E0B			LDAA	#$20
			LDAB	M00D7
			MUL
			ADDB	M7EE8
			CMPB	M6A16
			BEQ	Z8E1B
			JMP	Z8E9C
Z8E1B			JSR	F_92F3
			SUBD	M6A17
			BEQ	Z8E26
			JMP	Z8EAD
Z8E26			JSR	F_8EF2
			LDAB	M7789
			ANDB	#$0C
			BEQ	Z8E4D
			AIM	#$BF,TCSR3
			JSR	F_90E5
			LDX	#M69C1
			STX	M00A9
			LDX	#M6DD7
			STX	M00A7
			JSR	LO_CALL_05
			JSR	LO_CALL_0B
			LDAA	#$01
			STAA	M7791
			BRA	Z8E88
Z8E4D			AIM	#$BF,TCSR3
			LDAB	M7773
			JSR	HI_CALL_19
			JSR	F_90D5
			LDX	#M69C1
			STX	M00A9
			LDX	#M6A67
			STX	M00A7
			JSR	LO_CALL_00
			TST	>M00D7
			BNE	Z8E6E
			JSR	HI_CALL_12
Z8E6E			JSR	LO_CALL_09
			JSR	HI_CALL_05
			LDAA	#$01
			STAA	M7792
			CLR	M7793
			LDD	#$0101
			STD	M776E
			STD	M7770
			OIM	#$40,TCSR3
Z8E88			LDX	#M7DBB
			STX	M00A7
			LDX	#S_LOAD_COMPLETED
			JSR	F_9BC4
			JSR	HI_CALL_0A
			CLI
			LDAA	#$01
			STAA	M00CE
			RTS
Z8E9C			LDAA	M00CD
			INCA
			STAA	M00CD
			CMPA	#$20
			BEQ	Z8EA8
			JMP	Z8DE4
Z8EA8			CLI
			CLR	>M00CE
			RTS
Z8EAD			JMP	Z8CE9

F_8EB0			CLR	>M00D3
			LDX	#M7DC4
			STX	M00A7
			LDX	#S_READY
			JMP	F_9BC4

F_8EBE			JSR	HI_CALL_00
			SEI
			JSR	HI_CALL_01
			CLR	>M005A
			LDAB	#$0C
			JSR	LCD_WAIT
			STAB	LCD_CMD
			JSR	HI_CALL_07
			RTS

F_8ED4			LDAA	M6A0A
			STAA	M6A16
			LDAA	M00D7
			BEQ	Z8EEB
			CMPA	#$03
			BCC	Z8EEB
			CMPA	#$02
			BNE	Z8EF1
			LDD	M6A0F
			BRA	Z8EEE
Z8EEB			LDD	M6A0B
Z8EEE			STD	M6A17
Z8EF1			RTS

F_8EF2			LDX	#M7DB4
			STX	M00A7
			LDAB	#$07
			JSR	F_9CD8
			LDX	#M7DB6
			STX	M00A7
			LDX	#DVEC_8F0E
			LDAB	M00D7
			ASLB
			ABX
			LDX	,X
			JSR	F_9BC4
			RTS

DVEC_8F0E		FDB	S_DX
			FDB	S_TX
			FDB	S_PFM
			FDB	S_AL_2
			FDB	S_SY_2
			FDB	S_PC_2
			FDB	S_EF_2
			FDB	S_MC_2

S_READY			FCC	"ready? "
			FCB	$00
S_VERIFY		FCC	" Verify"
			FCB	$00
S_SAVE			FCC	" Save"
			FCB	$00
S_INT			FCC	" INT	 "
			FCB	$00
S_ERR			FCC	" ERR"
			FCB	$00
S_VERIFY_TAPE		FCC	" Verify Tape"
			FCB	$00
S_TAPE_TO_INT		FCC	" Tape to INT"
			FCB	$00
S_VERIFY_COMPLETED	FCC	"Verify Completed"
			FCB	$00
S_LOAD_ALL_READY	FCC	"Load all  ready?"
			FCB	$00
S_LOAD_READY		FCC	"Load	 ready?  "
			FCB	$00
S_TAPE_TO_BUFF		FCC	"Tape ?? to BUFF?"
			FCB	$00
S_SEARCH_TAPE		FCC	" Search Tape  "
			FCB	$00
S_LOAD_COMPLETED	FCC	" Load Completed "
			FCB	$00
S_PFM			FCC	"(PFM)"
			FCB	$00
S_TAPE_TO_PFM		FCC	" Tape to PFM"
			FCB	$00
S_PFM_2			FCC	" PFM	 "
			FCB	$00
S_TO_TAPE		FCC	"to Tape"
			FCB	$00
S_TAPE_TO		FCC	" Tape to "
			FCB	$00
S_PGM_CNG		FCC	" PGMCNG "
			FCB	$00
S_SYSTEM		FCC	" SYSTEM "
			FCB	$00
S_EFFECT		FCC	" EFFECT "
			FCB	$00
S_MICROTUN		FCC	" MICTUN "
			FCB	$00

S_ALL			FCC	"ALL"
			FCB	$00
S_SYS			FCC	"SYS"
			FCB	$00
S_PC			FCC	"PC "
			FCB	$00
S_EF			FCC	"EF "
			FCB	$00
S_MC			FCC	"MC "
			FCB	$00

S_AL_2			FCC	"(AL)"
			FCB	$00
S_SY_2			FCC	"(SY)"
			FCB	$00
S_PC_2			FCC	"(PC)"
			FCB	$00
S_EF_2			FCC	"(EF)"
			FCB	$00
S_MC_2			FCC	"(MC)"
			FCB	$00

F_903F			LDX	#M69C1
			STX	M0079
			LDAB	M00D7
			JSR	JMPOFFB
			FCB	$08,$07,$11,$27,$31,$49,$5A,$68

J9051			LDAB	#$4E
			MUL
			ADDD	#M6001
			STD	M0077
			JMP	Z9196

J905C			LDAB	#$4C
			MUL
Z905F			ADDD	#M6E45
			STD	M0077
			LDAB	#$49
			JSR	F_91E9
			LDX	M0079
			INX
			STX	M0079
			LDAB	#$03
			JMP	F_91E9
J9073			LDAB	M6A15
			BEQ	J9097
			CMPB	#$01
			BEQ	J90A9
			BRA	J90B8
J907E			LDX	#M7565
			STX	M0077
			LDAB	#$0B
			JSR	F_91E9
			LDX	#M7740
			STX	M0077
			LDAB	#$10
			JSR	F_91E9
			LDAB	#$2E
			JMP	Z91FB
J9097			LDAB	#$40
			MUL
			ADDD	#M7571
			STD	M0077
Z909F			LDAB	#$40
			JSR	F_91E9
			LDAB	#$09
			JMP	Z91FB
J90A9			LDX	#M75F1
			STX	M0077
			LDAB	#$37
			JSR	F_91E9
			LDAB	#$12
			JMP	Z91FB
J90B8			TSTA
			BNE	Z90CA
			LDX	#M7628
			STX	M0077
			LDAB	#$18
			JSR	F_91E9
			LDAB	#$31
			JMP	Z91FB
Z90CA			DECA
			LDAB	#$40
			MUL
			ADDD	#M7640
			STD	M0077
			BRA	Z909F

F_90D5			LDX	#M6A0B
			STX	M0077
			LDX	#M6A04
			STX	M0079
			LDAB	#$0B
			JSR	F_91E9
			RTS

F_90E5			LDX	#M6A0B
			STX	M0077
			LDX	#M6A0A
			STX	M0079
			LDAB	#$03
			JSR	F_91E9
			RTS

F_90F5			LDX	#M69C1
			STX	M0077
			LDAB	M00D7
			JSR	JMPOFFB
			FCB	$08,$07,$21,$4D,$37,$4B,$5C,$66

J9107			LDAB	#$4E
			MUL
			ADDD	#M6001
			STD	M0079
			JSR	F_91E7
			TST	>M00D7
			BEQ	Z9189
			LDX	#M6A0B
			STX	M0077
			LDAB	#$0B
			JSR	F_91E9
			RTS

J9122			LDAB	#$4C
			MUL
			ADDD	#M6E45
			STD	M0079
			LDAB	#$49
			JSR	F_91E9
			LDX	#M6A0B
			STX	M0077
			LDAB	#$03
			JSR	F_91E9
			RTS
J913A			LDX	#M7565
			STX	M0079
			LDAB	#$0B
			JSR	F_91E9
			LDX	#M7740
			STX	M0079
			LDAB	#$10
			JSR	F_91E9
			RTS
J914F			CMPA	#$02
			BCC	Z9160
			LDAB	#$40
			MUL
			ADDD	#M7571
			STD	M0079
			LDAB	#$40
			JSR	F_91E9
Z9160			RTS
J9161			LDX	#M75F1
			STX	M0079
			LDAB	#$37
			JSR	F_91E9
			RTS
J916C			TSTA
			BNE	Z917A
			LDX	#M7628
			STX	M0079
			LDAB	#$18
			JSR	F_91E9
			RTS
Z917A			DECA
			LDAB	#$40
			MUL
			ADDD	#M7640
			STD	M0079
			LDAB	#$40
			JSR	F_91E9
			RTS
Z9189			LDAB	#$0B
Z918B			LDX	M0079
			CLR	,X
			INX
			STX	M0079
			DECB
			BNE	Z918B
			RTS
Z9196			CLRB
Z9197			LDX	M0077
			LDAA	,X
			CMPB	#$43
			BCS	Z91B9
			CMPB	#$46
			BCS	Z91B5
			CMPB	#$49
			BEQ	Z91D1
			BCS	Z91B1
			CMPB	#$50
			BNE	Z91CE
			ANDA	#$0F
			BRA	Z91CE
Z91B1			LDAA	#$32
			BRA	Z91D1
Z91B5			LDAA	#$63
			BRA	Z91D1
Z91B9			CMPB	#$30
			BNE	Z91CE
			TIM	#$04,$00,X
			BNE	Z91C8
			ANDA	#$FB
			ORAA	#$02
			BRA	Z91CC
Z91C8			ORAA	#$04
			ANDA	#$FD
Z91CC			ANDA	#$0F
Z91CE			INX
			STX	M0077
Z91D1			LDX	M0079
			STAA	,X
			INX
			STX	M0079
			INCB
			TST	M777E
			BNE	Z91E2
			CMPB	#$55
			BRA	Z91E4
Z91E2			CMPB	#$49
Z91E4			BNE	Z9197
			RTS

F_91E7			LDAB	#$43
F_91E9			LDX	M0077
			LDAA	,X
			INX
			STX	M0077
			LDX	M0079
			STAA	,X
			INX
			STX	M0079
			DECB
			BNE	F_91E9
			RTS

Z91FB			CLRA
Z91FC			LDX	M0079
			STAA	,X
			INX
			STX	M0079
			DECB
			BNE	Z91FC
			RTS

F_9207			LDX	#M69C1
			STX	M0077
			LDAA	M00CD
			LDAB	M00D7
			JSR	JMPOFFB
			FCB	$35,$34,$06,$72,$A6,$70,$82,$8A

J921B			LDAB	#$4C
			MUL
			ADDD	#M6E45
			STD	M0079
			CLRB
Z9224			LDX	M0077
			LDAA	,X
			INX
			STX	M0077
			LDX	M0079
			SUBA	,X
			BNE	Z9287
			INX
			STX	M0079
			INCB
			CMPB	#$49
			BCS	Z9224
			BHI	Z9242
			LDX	#M6A0B
			STX	M0077
			BRA	Z9224
Z9242			CMPB	#$4C
			BCS	Z9224
			BRA	Z9287
J9248			LDAB	#$4E
			MUL
			ADDD	#M6001
			STD	M0079
			CLRB
Z9251			LDX	M0077
			LDAA	,X
			INX
			STX	M0077
			LDX	M0079
			CMPB	#$30
			BNE	Z9266
			EORA	,X
			ANDA	#$0D
			BNE	Z9287
			BRA	Z926A
Z9266			SUBA	,X
			BNE	Z9287
Z926A			INX
			STX	M0079
			INCB
			CMPB	#$43
			BCS	Z9251
			BHI	Z9283
			LDAA	M00D7
			BEQ	Z9287
			CMPA	#$01
			BNE	Z9287
			LDX	#M6A0B
			STX	M0077
			BRA	Z9251
Z9283			CMPB	#$4E
			BNE	Z9251
Z9287			RTS
J9288			CMPA	#$02
			BCC	Z9298
			LDAB	#$40
			MUL
			ADDD	#M7571
			STD	M0079
			LDAB	#$40
			BRA	Z92DE
Z9298			CLRB
			BRA	Z9287
J929B			LDX	#M75F1
			STX	M0079
			LDAB	#$37
			BRA	Z92DE
J92A4			TSTA
			BNE	Z92B0
			LDX	#M7628
			STX	M0079
			LDAB	#$18
			BRA	Z92DE
Z92B0			DECA
			LDAB	#$40
			MUL
			ADDD	#M7640
			STD	M0079
			LDAB	#$40
			BRA	Z92DE
J92BD			LDX	#M7565
			STX	M0079
			LDAB	#$0B
Z92C4			LDX	M0077
			LDAA	,X
			INX
			STX	M0077
			LDX	M0079
			SUBA	,X
			BNE	Z9287
			INX
			STX	M0079
			DECB
			BNE	Z92C4
			LDX	#M7740
			STX	M0079
			LDAB	#$10
Z92DE			LDX	M0077
			LDAA	,X
			INX
			STX	M0077
			LDX	M0079
			SUBA	,X
			BNE	Z9287
			INX
			STX	M0079
			DECB
			BNE	Z92DE
			BRA	Z9287

F_92F3			LDX	#M69C1
			LDAB	M00D7
			BEQ	Z92FE
			CMPB	#$03
			BCS	Z9302
Z92FE			LDAB	#$4A
			BRA	Z930C
Z9302			CMPB	#$01
			BNE	Z930A
			LDAB	#$56
			BRA	Z930C
Z930A			LDAB	#$4E
Z930C			STAB	M007B
			CLRA
			CLRB
Z9310			ADDB	,X
			ADCA	#$00
			INX
			DEC	>M007B
			BNE	Z9310
			RTS

F_931B			LDX	#M69C1
			LDAB	M00D7
			CMPB	#$01
			BNE	Z9328
			LDAB	#$58
			BRA	Z9332
Z9328			CMPB	#$02
			BNE	Z9330
			LDAB	#$50
			BRA	Z9332
Z9330			LDAB	#$4C
Z9332			STAB	M00CF
			BSR	F_934A
			LDAB	#$3C
			BRN	Z933A
Z933A			NOP
Z933B			LDAA	,X
			BSR	F_939D
			LDAB	#$3B
			PSHX
			PULX
			INX
			DEC	>M00CF
			BNE	Z933B
			RTS

F_934A			PSHA
			PSHB
			PSHX
			TST	>M00CD
			BNE	Z9357
			LDX	#6000
			BRA	Z935A
Z9357			LDX	#300
Z935A			LDAB	#30
			BRN	Z935E
Z935E			NOP
			DES
			BSR	F_936A
			INS
			DEX
			BNE	Z935A
			PULX
			PULB
			PULA
			RTS

F_936A			LDAA	#$01
			BSR	F_9383
			BSR	F_9381
			BSR	F_9381
			BSR	F_9381
			RTS

F_9375			LDAA	#$01
			BSR	F_9383
			LDAB	#$41
			PSHX
			PULX
			NOP
			BSR	F_9383
			RTS

F_9381			LDAB	#$20
F_9383			TIM	#$20,PORT5
			BEQ	Z9393
			DECB
			BNE	F_9383
			BRN	Z938D
Z938D			NOP
			EORA	#$01
			STAA	PORT2
			RTS
Z9393			LDAA	#$01
			STAA	M00D3
			TSX
			LDAB	#$0B
			ABX
			TXS
			RTS

F_939D			PSHA
			PSHB
			PSHX
			LDX	#TCSR1
			PSHA
			BSR	F_9375
			PULA
			BRN	Z93A9
Z93A9			BRN	Z93AB
Z93AB			NOP
Z93AC			NOP
			NOP
			RORA
			PSHA
			BCS	Z93B8
			LDAB	#$3F
			BSR	F_9375
			BRA	Z93BE
Z93B8			LDAB	#$1D
			BSR	F_936A
			BRA	Z93BE
Z93BE			PULA
			DEX
			BNE	Z93AC
			LDAB	#$1D
			PSHX
			PULX
			NOP
			DES
			BSR	F_936A
			LDAB	#$1E
			PSHX
			PULX
			NOP
			BSR	F_936A
			INS
			PULX
			PULB
			PULA
			RTS

F_93D6			CLR	>M00D7
			LDX	#M69C1
			JSR	F_9467
			BCS	Z93E4
			JMP	Z9466
Z93E4			JSR	F_9481
			BCC	Z9466
			LDAA	#$80
			STAA	M00D2
			JSR	F_94DE
			BCC	Z9466
			LDAA	M00D2
			STAA	,X
			INX
Z93F7			JSR	F_94AD
			BCC	Z9466
			LDAA	M00D2
			STAA	,X
			INX
			LDAB	M00D7
			BEQ	Z941F
			CMPB	#$04
			BCC	Z941F
			CMPB	#$01
			BNE	Z9414
			CPX	#M6A19
			BNE	Z93F7
			BRA	Z9465
Z9414			CMPB	#$02
			BNE	Z945E
			CPX	#M6A11
			BNE	Z93F7
			BRA	Z9465
Z941F			CPX	#M6A0D
			BNE	Z93F7
			LDAA	M6A0A
			ANDA	#$E0
			BEQ	Z9465
			CMPA	#$20
			BNE	Z9433
			LDAB	#$01
			BRA	Z945A
Z9433			CMPA	#$40
			BNE	Z943B
			LDAB	#$02
			BRA	Z945A
Z943B			LDAA	M6A0A
			CMPA	#$60
			BNE	Z9446
			LDAB	#$04
			BRA	Z9456
Z9446			CMPA	#$65
			BEQ	Z9450
			BHI	Z9454
			LDAB	#$05
			BRA	Z9456
Z9450			LDAB	#$06
			BRA	Z9456
Z9454			LDAB	#$07
Z9456			STAB	M00D7
			BRA	Z9465
Z945A			STAB	M00D7
			BRA	Z93F7
Z945E			LDAB	#$02
			STAB	M00D3
			CLC
			BRA	Z9466
Z9465			SEC
Z9466			RTS

F_9467			CLRA
			STAA	M00D1
Z946A			BSR	F_9493
			BCC	Z9480
			BSR	F_9494
			BCC	Z9480
			CMPB	#$38
			BCC	F_9467
			CMPB	#$11
			BCS	F_9467
			INC	>M00D1
			BNE	Z946A
			SEC
Z9480			RTS

F_9481			CLR	>M00D4
Z9484			BSR	F_9493
			BCC	Z9492
			TBA
			ADDA	M00D4
			STAB	M00D4
			CMPA	#$41
			BCS	Z9484
			SEC
Z9492			RTS

F_9493			CLRB
F_9494			TIM	#$20,PORT5
			BEQ	Z94A7
			INCB
			LDAA	PORT2
			ANDA	#$02
			EORA	M00D5
			BEQ	F_9494
			EIM	#$02,M00D5
			SEC
			RTS
Z94A7			LDAA	#$01
			STAA	M00D3
			CLC
			RTS

F_94AD			LDAA	#$80
			STAA	M00D2
			BSR	F_951E
			BCC	Z94F4
Z94B5			CLRB
Z94B6			INCB
			BEQ	Z94F4
			TIM	#$20,PORT5
			BEQ	Z94F0
			LDAA	PORT2
			ANDA	#$02
			EORA	M00D5
			BEQ	Z94B6
Z94C6			INCB
			BEQ	Z94F4
			TIM	#$20,PORT5
			BEQ	Z94F0
			LDAA	PORT2
			ANDA	#$02
			EORA	M00D5
			BNE	Z94C6
			CMPB	#$66
			BCC	Z94F4
			CMPB	#$33
			BCS	Z94B5

F_94DE			BSR	F_94FA
			BCC	Z94F4
			LDAA	M00D6
			CMPA	#$04
			BCC	Z94F4
			RORA
			RORA
			ROR	>M00D2
			BCC	F_94DE
			RTS
Z94F0			LDAA	#$01
			BRA	Z94F6
Z94F4			LDAA	#$02
Z94F6			STAA	M00D3
			CLC
			RTS

F_94FA			LDAA	PORT2
			ANDA	#$02
			STAA	M00D0
			CLR	>M00D6
			LDAB	#$28
Z9505			LDAA	PORT2
			ANDA	#$02
			EORA	M00D0
			BEQ	Z951A
			INC	>M00D6
			EIM	#$02,M00D0
Z9513			DECB
			BNE	Z9505
			LDAA	M00D0
			BRA	Z9527
Z951A			PSHX
			PULX
			BRA	Z9513

F_951E			CLRB
Z951F			INCB
			TSTB
			BEQ	Z9538
			LDAA	PORT2
			ANDA	#$02
Z9527			EORA	M00D5
			BEQ	Z951F
Z952B			INCB
			TSTB
			BEQ	Z9538
			LDAA	PORT2
			ANDA	#$02
			EORA	M00D5
			BNE	Z952B
			SEC
Z9538			RTS
LO_CALL_02		LDAA	#$00
			STAA	M7772
			CLR	M776C
			LDD	#$0101
			STD	M776E
			STD	M7770
			LDAA	#$40
			STAA	M7565
			JSR	HI_CALL_00
			JSR	HI_CALL_01
			CLR	>M005A
			JSR	F_9998
			JSR	HI_CALL_1A
			JSR	F_9B4E
			LDAA	M00A6
			CMPA	#$03
			BNE	Z9583
			LDAA	#$04
			STAA	M7772
			JSR	F_98BA
			LDAA	#$04
			STAA	M00D8
			CLR	>M00D9
			JSR	F_96C4
			SEI
Z957A			BRN	Z957A
			JSR	HI_CALL_08
			CLI
			JMP	Z966E
Z9583			LDX	#M7DAB
			STX	M00A7
			LDX	#S_CHECK_LVL
			JSR	PUTSTRX
			LDAA	#$FE
			STAA	M7D63
			CLR	M7D53
			CLR	M776D
			CLR	M7D6B
			CLR	M7F99
			AIM	#$BF,TCSR3
			AIM	#$F7,TCSR1
			AIM	#$FE,RP5CR
			LDAA	#$04
			STAA	M0058
			LDAA	#$45
			STAA	M0052
			LDAA	#$30
			STAA	M00F1
			LDAB	#$00
			JSR	HI_CALL_1D
			OIM	#$01,RP5CR
			OIM	#$08,TCSR1
			OIM	#$40,TCSR3
			CLR	M7933
			CLRA
			LDAB	#$30
			BSR	F_961F
			CLRA
			LDX	#S_1L
			BSR	F_9604
			LDAA	#$80
			LDX	#S_2R
			BSR	F_9604
			CLRA
			LDX	#S_HP_L
			BSR	F_9604
			LDAA	#$80
			LDX	#S_HP_R
			BSR	F_9604
			AIM	#$BF,TCSR3
			AIM	#$F7,TCSR1
			LDAA	#$04
			STAA	M0058
			LDAA	#$45
			STAA	M0051
			LDAB	#$00
			JSR	HI_CALL_1C
			OIM	#$08,TCSR1
			OIM	#$40,TCSR3
			LDAA	#$04
			STAA	M7772
			BRA	Z9648

F_9604			PSHA
			PSHX
			LDX	#M7DB6
			STX	M00A7
			PULX
			JSR	F_9BC4
			PULA
			BSR	F_961D
Z9612			JSR	HI_CALL_17
			CMPB	#$01
			BNE	Z9612
			JSR	F_98BA
			RTS

F_961D			LDAB	#$20
F_961F			SEI
Z9620			BRN	Z9620
Z9622			TST	OPZ_R1
			BMI	Z9622
			STAB	OPZ_R0
Z962A			BRN	Z962A
			NOP
			STAA	OPZ_R1
			CLI
			RTS

S_1L			FCC	"1(L)"
			FCB	$00
S_2R			FCC	"2(R)"
			FCB	$00
S_HP_L			FCC	"HP(L)"
			FCB	$00
S_HP_R			FCC	"HP(R)"
			FCB	$00

Z9648			JSR	F_9B4E
			SEI
Z964C			BRN	Z964C
			CLRA
			STAA	TCSR1
			STAA	TCSR2
			LDAA	#$02
			STAA	TCSR3
			AIM	#$FE,RP5CR
			JSR	F_96C4
			JSR	F_9700
			JSR	F_97E2
			JSR	HI_CALL_08
			CLI
			JSR	F_978D
			LDAA	#$52
			STAA	TCSR3
Z966E			LDAA	M00D8
			BNE	Z9677
			JSR	F_9852
			BRA	Z96A4
Z9677			CMPA	#$01
			BNE	Z9680
			JSR	F_9893
			BRA	Z96A4
Z9680			CMPA	#$02
			BNE	Z9689
			JSR	F_9883
			BRA	Z96A4
Z9689			CMPA	#$03
			BNE	Z9692
			JSR	F_98C6
			BRA	Z96A4
Z9692			CMPA	#$04
			BNE	Z969B
			JSR	F_9907
			BRA	Z966E
Z969B			CMPA	#$05
			BNE	Z96A4
			JSR	F_9914
			BRA	Z96AC
Z96A4			JSR	HI_CALL_17
			JSR	F_96AD
			BRA	Z966E
Z96AC			RTS

F_96AD			TSTB
			BEQ	Z96B4
			CMPB	#$01
			BEQ	Z96B5
Z96B4			RTS
Z96B5			LDAA	M00D8
			CMPA	#$05
			BHI	F_96AD
			INC	>M00D8
			CLR	>M00D9
			JMP	F_9B4E

F_96C4			CLR	M7773
			CLR	M7779
			LDAA	#$01
			STAA	M776C
			STAA	M7569
			STAA	M756A
			STAA	M7568
			STAA	M756C
			LDAA	#$10
			STAA	M7566
			CLR	M7567
			CLR	M756B
			CLR	M756F
			LDAB	#$40
			LDAA	#$0A
Z96ED			COMA
			JSR	LCD_WAIT
			STAB	LCD_CMD
			JSR	LCD_WAIT
			STAA	LCD_DATA
			INCB
			CMPB	#$48
			BNE	Z96ED
			RTS

F_9700			LDX	#RAM
			STX	M00A9
			LDX	#$00F8
			STX	M00A7
Z970A			BSR	F_9718
			BSR	F_9744
			BSR	F_9723
			LDX	M00A9
			CPX	#M7FE0
			BCS	Z970A
			RTS

F_9718			LDX	M00A9
			STX	M00DA
			LDX	M00A7
			STX	M00DC
			BSR	F_9733
			RTS

F_9723			LDX	M00A7
			STX	M00DA
			LDX	M00A9
			STX	M00DC
			BSR	F_9733
			LDX	M00A9
			ABX
			STX	M00A9
			RTS

F_9733			CLRB
Z9734			LDX	M00DA
			ABX
			LDAA	,X
			LDX	M00DC
			ABX
			STAA	,X
			INCB
			CMPB	#$08
			BNE	Z9734
			RTS

F_9744			CLRB
Z9745			LDX	M00A9
			ABX
			LDAA	#$55
			BSR	F_9756
			LDAA	#$AA
			BSR	F_9756
			INCB
			CMPB	#$08
			BNE	Z9745
			RTS

F_9756			STAA	,X
			CMPA	,X
			BNE	Z975D
			RTS
Z975D			LDAA	#$0E
			PSHA
			LDX	#S_IC_NG
			JSR	F_9BBD
			PULA
			LDX	#M7DAE
			STX	M00A7
			JSR	F_9BD1
			JSR	F_9B87
Z9772			BRA	Z9772

S_CHECK_LVL		FCC	"Check LVL"
			FCB	$00

S_IC_NG			FCC	" IC   is NG ! "
			FCB	$00

F_978D			LDAB	#$0A
Z978F			LDX	#M7E0C
			ABX
			CLR	,X
			DECB
			BNE	Z978F
			CLRB
Z9799			LDX	#S_TX81Z
			ABX
			LDAA	,X
			BEQ	Z97A7
			JSR	HI_CALL_0C
			INCB
			BRA	Z9799
Z97A7			LDAB	#$01
			JSR	F_98BC
Z97AC			LDX	#S_TX81Z
			STX	M00A9
			LDX	#M7E0C
			STX	M00A7
Z97B6			LDX	M00A9
			ABX
			LDAA	,X
			BEQ	Z97C7
			LDX	M00A7
			ABX
			CMPA	,X
			BNE	Z97C8
			INCB
			BRA	Z97B6
Z97C7			RTS
Z97C8			LDX	#S_ERROR_MIDI
			JSR	F_9BBD
Z97CE			BRA	Z97CE

S_ERROR_MIDI		FCC	"ERROR MIDI!"
			FCB	$00

S_TX81Z			FCC	"TX81Z"
			FCB	$00

F_97E2			CLRB
Z97E3			EIM	#$01,PORT2
			BSR	F_981B
			LDAA	PORT2
			ANDA	#$02
			STAA	M00D0
Z97EE			DECB
			BNE	Z97E3
			LDAB	#$80
Z97F3			EIM	#$01,PORT2
			BSR	F_9824
			DECB
			BNE	Z97F3
			LDAA	M00DE
			CMPA	#$7E
			BCS	Z9806
			CMPA	#$83
			BCC	Z9806
Z9805			RTS
Z9806			LDX	#S_ERROR_CASS
			JSR	F_9BBD
			LDAA	M00A6
			CMPA	#$02
Z9810			BNE	Z9810
Z9812			JSR	HI_CALL_17
			CMPB	#$02
			BNE	Z9812
			BRA	Z9805

F_981B			LDX	#$009F
			NOP
			NOP
Z9820			DEX
			BNE	Z9820
			RTS

F_9824			LDX	#PORT5
Z9827			LDAA	PORT2
			ANDA	#$02
			EORA	M00D0
			BEQ	Z9838
			EORA	M00D0
			STAA	M00D0
			INC	>M00DE
			BRA	Z983E
Z9838			PSHX
			PULX
Z983A			BRN	Z983A
Z983C			BRN	Z983C
Z983E			DEX
			BNE	Z9827
			PSHX
			PULX
			NOP
			RTS
S_ERROR_CASS		FCC	"ERROR CASS.!"
			FCB	$00

F_9852			LDX	#S_CHECK_MIDI_THRU
			JSR	F_9BBD
			LDAA	#$AA
			JSR	HI_CALL_0C
			LDAA	#$FF
			JSR	HI_CALL_0C
			CLRA
			JSR	HI_CALL_0C
			LDAA	#$55
			JSR	HI_CALL_0C
			LDX	#$A000
Z986E			DEX
			BNE	Z986E
			RTS

S_CHECK_MIDI_THRU	FCC	"Check MIDI THRU "
			FCB	$00

F_9883			CLRA
			CLRB
Z9885			LDX	#M7DAB
			ABX
			STAA	,X
			INCB
			CMPB	#$20
			BNE	Z9885
			JMP	F_9B87

F_9893			LDAA	M00D9
			ANDA	#$01
			BNE	Z98B5
			LDAA	#$20
			CLRB
Z989C			LDX	#M7DAB
			ABX
			STAA	,X
			INCB
			CMPB	#$20
			BNE	Z989C
			JSR	F_9B87
			LDAA	M00D9
			CMPA	#$05
			BCC	Z98C5
			INCA
			STAA	M00D9
			BRA	F_98BA
Z98B5			LDAA	#$FF
			CLRB
			BRA	Z989C

F_98BA			LDAB	#30
F_98BC			LDX	#4500
Z98BF			DEX
			BNE	Z98BF
			DECB
			BNE	F_98BC
Z98C5			RTS

F_98C6			TST	>M00D9
			BNE	Z98F9
			LDAA	#$01
			STAA	M776C
			STAA	M7569
			STAA	M00D9
			LDX	#S_CHECK_LED
			JSR	F_9BBD
			CLRB
Z98DC			LDAA	#$80
Z98DE			ANDA	#$F7
			STAA	PORT6
			LSRA
			PSHB
			LDAB	#30
			JSR	F_98BC
			PULB
			INCB
			CMPB	#$04
			BEQ	Z98DC
			CMPB	#$08
			BNE	Z98DE
			LDAA	#$F0
			ANDA	#$F7
			STAA	PORT6
Z98F9			RTS

S_CHECK_LED		FCC	"Check LED1-4"
			FCB	$00

F_9907			BRN	F_9907
Z9909			BRN	Z9909
			INC	>M00D8
			CLR	>M00D9
			JMP	F_9B4E

F_9914			TST	>M00D9
			BNE	Z9922
			CLR	>M00DA
			LDX	#S_PUSH_SWITCH
			JSR	F_9BBD
Z9922			LDAA	M00D9
			INCA
			CLRB
			LDX	#M7DB7
			STX	M00A7
			JSR	F_9BD1
			JSR	F_9B87
			JSR	HI_CALL_17
			TSTB
			BNE	Z993C
			CLR	>M00DA
Z993A			BRA	Z9922
Z993C			CMPB	#$03
			BCS	Z997C
			CMPB	#$04
			BCS	Z9981
			BEQ	Z9922
			CMPB	#$0A
			BCS	Z9984
			CMPB	#$0D
			BCS	Z9988
			BRA	Z9922
Z9950			CMPB	M00D9
			BEQ	Z995A
			LDAB	#$01
			STAB	M00DA
			BRA	Z9922
Z995A			TST	>M00DA
			BEQ	Z996C
			DEC	>M00D9
			TST	>M00D9
Z9965			BMI	Z9965
			CLR	>M00DA
			BRA	Z9922
Z996C			LDAB	#$01
			STAB	M00DA
			INC	>M00D9
			LDAB	M00D9
			CMPB	#$0B
			BNE	Z9922
			JMP	hdlr_RST
Z997C			COMB
			SUBB	#$F7
			BRA	Z9950
Z9981			CLRB
			BRA	Z9950
Z9984			SUBB	#$04
			BRA	Z9950
Z9988			SUBB	#$02
			BRA	Z9950

S_PUSH_SWITCH		FCC	"Push Switch"
			FCB	$00

F_9998			JSR	F_8741
			JSR	F_878B
			LDX	#D_99C9
			STX	M00A9
			LDAB	#$37
			LDX	#M75F1
			JSR	F_86B5
			CLRB
			LDX	#M7571
Z99AF			STAB	,X
			INCB
			INX
			CPX	#M75F1
			BNE	Z99AF
			LDX	#S_GOOD_MORNING
			STX	M00A9
			LDAB	#$10
			LDX	#M7740
			JSR	F_86B5
			JSR	F_9A00
			RTS

D_99C9			FCB	$08,$18,$00,$49,$00,$00,$19,$10
			FCB	$13,$18,$31,$10,$13,$15,$18,$11
			FCB	$15,$18,$31,$10,$13,$18,$31,$0F
			FCB	$14,$18,$31,$10,$13,$15,$18,$10
			FCB	$13,$15,$18,$10,$13,$18,$31,$10
			FCB	$13,$15,$18,$0F,$14,$18,$31,$10
			FCB	$13,$15,$18,$0F,$12,$14,$18

F_9A00			LDAA	M778A
			PSHA
			LDAA	M7789
			PSHA
			LDAB	#$01
			STAB	M778A
			LDAB	#$01
			STAB	M7789
			CLRA
			JSR	HI_CALL_02
			LDAB	#$03
			STAB	M7789
			CLRA
			JSR	HI_CALL_02
			PULA
			STAA	M7789
			PULA
			STAA	M778A
			JSR	HI_CALL_03
			RTS
HI_CALL_00		PSHB
			LDAB	#$00
			JMP	Z9AC6
HI_CALL_01		PSHB
			LDAB	#$01
			JMP	Z9AC6
HI_CALL_02		PSHB
			LDAB	#$02
			JMP	Z9AC6
HI_CALL_03		PSHB
			LDAB	#$03
			JMP	Z9AC6
HI_CALL_04		PSHB
			LDAB	#$04
			JMP	Z9AC6
HI_CALL_05		PSHB
			LDAB	#$05
			JMP	Z9AC6
HI_CALL_06		PSHB
			LDAB	#$06
			JMP	Z9AC6
HI_CALL_07		PSHB
			LDAB	#$07
			BRA	Z9AC6
HI_CALL_08		PSHB
			LDAB	#$08
			BRA	Z9AC6
HI_CALL_09		PSHB
			LDAB	#$09
			BRA	Z9AC6
HI_CALL_0A		PSHB
			LDAB	#$0A
			BRA	Z9AC6
HI_CALL_0B		PSHB
			LDAB	#$0B
			BRA	Z9AC6
HI_CALL_0C		PSHB
			LDAB	#$0C
			BRA	Z9AC6
HI_CALL_0D		PSHB
			LDAB	#$0D
			BRA	Z9AC6
HI_CALL_0E		PSHB
			LDAB	#$0E
			BRA	Z9AC6
HI_CALL_0F		PSHB
			LDAB	#$0F
			BRA	Z9AC6
HI_CALL_10		PSHB
			LDAB	#$10
			BRA	Z9AC6
HI_CALL_11		PSHB
			LDAB	#$11
			BRA	Z9AC6
HI_CALL_12		PSHB
			LDAB	#$12
			BRA	Z9AC6
HI_CALL_13		PSHB
			LDAB	#$13
			BRA	Z9AC6
HI_CALL_14		PSHB
			LDAB	#$14
			BRA	Z9AC6
HI_CALL_15		PSHB
			LDAB	#$15
			BRA	Z9AC6
HI_CALL_16		PSHB
			LDAB	#$16
			BRA	Z9AC6
HI_CALL_17		PSHB
			LDAB	#$17
			BRA	Z9AC6
HI_CALL_18		PSHB
			LDAB	#$18
			BRA	Z9AC6
HI_CALL_19		PSHB
			LDAB	#$19
			BRA	Z9AC6
HI_CALL_1A		PSHB
			LDAB	#$1A
			BRA	Z9AC6
HI_CALL_1B		PSHB
			LDAB	#$1B
			BRA	Z9AC6
HI_CALL_1C		PSHB
			LDAB	#$1C
			BRA	Z9AC6
HI_CALL_1D		PSHB
			LDAB	#$1D
Z9AC6			STAB	XROM
			PULB
			JSR	XROM_CALL
			RTS

F_9ACD			CLRB
Z9ACE			PSHB
			LDAA	,X
			CMPB	#$30
			BNE	Z9AE6
			TIM	#$04,$00,X
			BNE	Z9AE0
			ANDA	#$FB
			ORAA	#$02
			BRA	Z9AE4
Z9AE0			ORAA	#$04
			ANDA	#$FD
Z9AE4			ANDA	#$0F
Z9AE6			PSHX
			ANDA	#$7F
			TAB
			ADDB	M00C5
			STAB	M00C5
			JSR	HI_CALL_0C
			PULX
			INX
			PULB
			INCB
			CMPB	#$43
			BNE	Z9ACE
			PSHX
Z9AFA			LDAA	#$63
			PSHB
			TAB
			ADDB	M00C5
			STAB	M00C5
			JSR	HI_CALL_0C
			PULB
			INCB
			CMPB	#$46
			BNE	Z9AFA
Z9B0B			LDAA	#$32
			PSHB
			TAB
			ADDB	M00C5
			STAB	M00C5
			JSR	HI_CALL_0C
			PULB
			INCB
			CMPB	#$49
			BNE	Z9B0B
			PULX
Z9B1D			PSHB
			LDAA	,X
			CMPB	#$4F
			BNE	Z9B26
			ANDA	#$0F
Z9B26			PSHX
			ANDA	#$7F
			TAB
			ADDB	M00C5
			STAB	M00C5
			JSR	HI_CALL_0C
			PULX
			INX
			PULB
			INCB
			CMPB	#$54
			BNE	Z9B1D
Z9B39			CLRA
			PSHB
			TAB
			ADDB	M00C5
			STAB	M00C5
			JSR	HI_CALL_0C
			PULB
			INCB
			CMPB	#$80
			BNE	Z9B39
			RTS

F_9B4A			LDAA	#$10
			BRA	Z9B50
F_9B4E			LDAA	#$20
Z9B50			LDX	#M7DCB
Z9B53			PSHA
			LDAA	#$20
			DEX
			STAA	,X
			PULA
			DECA
			BNE	Z9B53
			RTS

PUTSTRX			LDAB	,X
			BMI	Z9B6C
			CMPB	#$20
			BCC	Z9B67
			RTS
Z9B67			BSR	PUTCHAR
			INX
			BRA	PUTSTRX
Z9B6C			PSHX
			LDX	#SO__BASE
			ABX
			BSR	PUTSTRX
			PULX
			INX
			BRA	PUTSTRX

PUTCHAR			PSHX
			LDX	M00A7
			STAB	,X
			INX
			STX	M00A7
			PULX
			RTS

LCD_WAIT		TST	LCD_CMD
			BMI	LCD_WAIT
			RTS

F_9B87			LDX	#M7DAB
			STX	M00A9
			LDX	#M7D8B
			STX	M00A7
			LDAB	#$80
Z9B93			LDX	M00A9
			LDAA	,X
			INX
			STX	M00A9
			LDX	M00A7
			CMPA	,X
			BEQ	Z9BAC
			BSR	LCD_WAIT
			STAB	LCD_CMD
			BSR	LCD_WAIT
			STAA	LCD_DATA
			STAA	,X
Z9BAC			INX
			STX	M00A7
			INCB
			CMPB	#$D0
			BEQ	Z9BBC
			CMPB	#$90
			BNE	Z9B93
			LDAB	#$C0
			BRA	Z9B93
Z9BBC			RTS

F_9BBD			PSHX
			LDX	#M7DAB
			STX	M00A7
			PULX
F_9BC4			JSR	PUTSTRX
			JMP	F_9B87

F_9BCA			CLR	>M00AB
			LDAB	#$64
			BSR	F_9BDC
F_9BD1			STAB	M00AB
			LDAB	#$0A
			BSR	F_9BDC
F_9BD7			ADDA	#$30
			TAB
			BRA	Z9BF4

F_9BDC			STAB	M00AC
			LDAB	#$30
Z9BE0			CMPA	M00AC
			BCS	Z9BE9
			INCB
			SUBA	M00AC
			BRA	Z9BE0
Z9BE9			CMPB	#$30
			BNE	Z9BF4
			TST	>M00AB
			BNE	Z9BF4
			LDAB	#$20
Z9BF4			JSR	PUTCHAR
			SUBB	#$20
			RTS

F_9BFA			CLR	>M00AB
			CLR	>M00AC
Z9C00			SUBD	#1000
			BCS	Z9C0A
			INC	>M00AB
			BRA	Z9C00
Z9C0A			ADDD	#1000
Z9C0D			SUBD	#100
			BCS	Z9C17
			INC	>M00AC
			BRA	Z9C0D
Z9C17			ADDD	#100
			PSHB
			LDAA	M00AB
			LDAB	#$0A
			MUL
			ADDB	M00AC
			TBA
			LDAB	#$01
			JSR	F_9BD1
			PULA
			RTS

F_9C2A			PSHA
			PSHB
			CLR	>M00AB
Z9C2F			SUBD	#10000
			BCS	Z9C39
			INC	>M00AB
			BRA	Z9C2F
Z9C39			ADDD	#10000
			XGDX
			LDAA	M00AB
			BEQ	Z9C46
			JSR	F_9BD7
			BRA	Z9C4B
Z9C46			LDAB	#$20
			JSR	PUTCHAR
Z9C4B			XGDX
			JSR	F_9BFA
			JSR	F_9BD1
			PULB
			PULA
			XGDX
			CPX	#1000
			BCC	Z9C85
			LDD	M00A7
			SUBD	#$0004
			STD	M00A7
			LDAB	#$20
			JSR	PUTCHAR
			CPX	#100
			BCC	Z9C7E
			JSR	PUTCHAR
			CPX	#FRCL
			BCC	Z9C7A
			JSR	PUTCHAR
			LDAB	#$01
			BRA	Z9C80
Z9C7A			LDAB	#$02
			BRA	Z9C80
Z9C7E			LDAB	#$03
Z9C80			LDX	M00A7
			ABX
			STX	M00A7
Z9C85			RTS

F_9C86			PSHX
			XGDX
			JSR	F_9BFA
			PULX
			CPX	#1000
			BCC	Z9C96
			LDAB	#$20
			STAB	M7DC6
Z9C96			LDAB	#$2E
			JSR	PUTCHAR
			JSR	F_9BD1
			RTS

F_9C9F			CLR	>M00AC
Z9CA2			SUBD	#100
			BCS	Z9CAC
			INC	>M00AC
			BRA	Z9CA2
Z9CAC			ADDD	#100
			PSHB
			LDAA	M00AC
			JSR	F_9BD7
			PULA
			LDAB	#$2E
			JSR	PUTCHAR
			JSR	F_9BD1
			RTS

F_9CBF			TST	M7792
			BEQ	Z9CCF
			TST	M7793
			BNE	Z9CCD
			ADDB	#$20
			BRA	Z9CCF
Z9CCD			LDAB	#$63
Z9CCF			RTS

F_9CD0			TST	M7791
			BEQ	Z9CD7
			ADDB	#$20
Z9CD7			RTS

F_9CD8			LDAA	#$20
			LDX	M00A7
Z9CDC			STAA	,X
			INX
			STX	M00A7
			DECB
			BNE	Z9CDC
			RTS

LO_CALL_0C		TST	>M0056
			BNE	J9D21
			JSR	F_9B4E
			STX	M00A7
			LDAB	#$0C
			JSR	LCD_WAIT
			STAB	LCD_CMD
			TST	>M009A
			BEQ	Z9CFF
			JMP	Z9E9E
Z9CFF			LDAB	M7772
			CMPB	#$17
			BCS	Z9D07
			CLRB
Z9D07			JSR	JMPOFFB
			FCB	$1E,$17,$19,$14,$20,$3A,$57,$10,$0F,$18,$C9,$0C,$0B
			FCB	$0A,$7C,$08,$07,$10,$FA,$04,$03,$02,$B0
J9D21			RTS
Z9D22			JMP	Z9EEC
			JMP	Z9EC0
J9D28			JMP	Z9E61
			JMP	Z9E2F
			JSR	F_B1CE
			LDAB	#$02
			STAB	M7787
			TST	>M00A5
			BEQ	Z9D46
			LDX	#M7DBB
			STX	M00A7
			LDX	#S_ARE_YOU_SURE
			JMP	F_9BC4
Z9D46			JMP	Z9F07
			JSR	F_B163
			LDX	#M7DBB
			STX	M00A7
			LDAB	M7774
			CMPB	#$35
			BNE	Z9D64
			LDX	#S_NAME
			JSR	PUTSTRX
			JSR	F_AFC9
			JMP	F_9B87
Z9D64			JMP	Z9F0C
			TST	M7795
			BPL	Z9D94
			LDAB	#$50
			JSR	F_9CD0
			JSR	PUTCHAR
			LDAA	M7779
			JSR	F_AF7D
			LDX	#M7DB0
			STX	M00A7
			JSR	F_AFC9
			LDX	#M7DBB
			STX	M00A7
			LDAB	#$2A
			STAB	M7774
			LDAB	#$02
			STAB	M7787
			JMP	J9F54
Z9D94			LDAB	#$50
			JSR	F_9CD0
			JSR	PUTCHAR
			LDX	#S_ERFORMANCE_MODE
			JSR	PUTSTRX
			LDX	#M7DBB
			STX	M00A7
			LDX	#S_PFM_STORE
			JSR	PUTSTRX
			LDAA	M777A
			LDX	#M7DC5
			STX	M00A7
			INCA
			CLRB
			JSR	F_9BD1
			LDAB	#$7E
			JSR	PUTCHAR
			LDAA	M7795
			BMI	Z9DCE
			LDX	#M7DC8
			STX	M00A7
			INCA
			CLRB
			JSR	F_9BD1
Z9DCE			BRA	Z9E13
			LDAB	#$50
			JSR	F_9CD0
			JSR	PUTCHAR
			LDX	#S_ERFORMANCE_MODE
			BRA	Z9E21
Z9DDD			LDAB	#$50
			JSR	F_9CBF
			JSR	PUTCHAR
			LDX	#S_LAY_SINGLE
			JSR	PUTSTRX
			LDX	#M7DBB
			STX	M00A7
			LDX	#S_MEM_STR
			JSR	PUTSTRX
			LDAA	M777F
			LDX	#M7DC3
			STX	M00A7
			JSR	F_AF7D
			LDAB	#$7E
			JSR	PUTCHAR
			LDAA	M7795
			BMI	Z9E13
			LDX	#M7DC7
			STX	M00A7
			JSR	F_AF7D
Z9E13			JMP	F_9B87
			LDAB	#$50
			JSR	F_9CBF
			JSR	PUTCHAR
			LDX	#S_LAY_SINGLE
Z9E21			JSR	PUTSTRX
			LDX	#M7DBB
			STX	M00A7
			LDX	#S_MEM_PROTECTED
			JMP	F_9BC4
Z9E2F			JSR	F_AFB0
			LDX	#M7DBB
			STX	M00A7
			LDX	#S_EG_COPY_OP_OP
			JSR	PUTSTRX
			LDX	#M7DC5
			STX	M00A7
			LDAA	M777C
			ANDA	#$03
			INCA
			JSR	F_9BD7
			LDAB	#$7E
			JSR	PUTCHAR
			LDAA	M7794
			BMI	Z9E5E
			LDX	#M7DC9
			STX	M00A7
			INCA
			JSR	F_9BD7
Z9E5E			JMP	F_9B87
Z9E61			LDAB	M7774
			CMPB	#$14
			BCC	Z9E70
			LDAB	#$01
			STAB	M7772
			JMP	Z9D22
Z9E70			JSR	F_B07A
			LDX	#M7DBB
			STX	M00A7
			LDAB	M7774
			CMPB	#$1F
			BNE	Z9E90
			LDX	#M7740
Z9E82			LDAB	,X
			JSR	PUTCHAR
			INX
			CPX	#M7750
			BNE	Z9E82
			JMP	F_9B87
Z9E90			TST	>M00A5
			BEQ	Z9E9B
			LDX	#S_ARE_YOU_SURE
			JMP	F_9BC4
Z9E9B			JMP	Z9F0C
Z9E9E			LDX	#M7DAC
			STX	M00A7
			LDX	#S_MASTER_VOLUME
			JSR	PUTSTRX
			JSR	F_B3B5
			LDX	#M7DC9
			STX	M00A7
			LDAA	M776D
			COMA
			LSRA
			JSR	F_B4D6
			CLRB
			JSR	F_9BD1
			JMP	F_9B87
Z9EC0			TST	M7795
			BMI	Z9EC8
			JMP	Z9DDD
Z9EC8			LDAB	#$50
			JSR	F_9CBF
			JSR	PUTCHAR
			LDX	#S_LAY_SINGLE
			JSR	PUTSTRX
			LDX	#M7DBB
			STX	M00A7
			LDAA	M7773
			JSR	F_AF7D
			LDX	#M7DC0
			STX	M00A7
			JSR	F_AFD8
			JMP	F_9B87
Z9EEC			LDAB	M7774
			CMPB	#$0B
			BCS	Z9EF9
			CLR	M7772
			JMP	Z9E61
Z9EF9			TST	M7794
			BMI	Z9F01
			JMP	Z9E2F
Z9F01			JSR	F_AFB0
			JSR	F_AFED
Z9F07			LDX	#M7DBB
			STX	M00A7
Z9F0C			LDAB	M7788
			CMPB	#$01
			BEQ	Z9F75
			CMPB	#$02
			BCS	Z9F1A
			JMP	Z9FAC
Z9F1A			LDAB	M7774
			JSR	JMPOFF1
D9F20			FCB	$E5,$0B,$20,$14,$1F,$1F,$1C,$28,$1F,$29,$2A,$30,$34
			FCB	$31,$26,$33,$1B,$34,$32,$35,$0E,$3C,$1E,$3D,$34,$3E
			FCB	$2E,$3F,$06,$46,$32,$47,$02,$00
J9F42			RTS
J9F43			SUBB	#$09
			BRA	Z9F72
J9F47			LDAB	#$16
			BRA	Z9F72
J9F4B			LDAB	#$17
			LDAA	M778C
			CMPA	#$06
			BRA	Z9F5B
J9F54			LDAB	#$17
			LDAA	M778C
			CMPA	#$04
Z9F5B			BCS	Z9F5E
			INCB
Z9F5E			BRA	Z9F72
J9F60			LDAB	#$19
			BRA	Z9F72
J9F64			LDAB	#$1A
			BRA	Z9F72
			LDAB	#$0D
			BRA	Z9F72
J9F6C			LDAB	#$1B
			BRA	Z9F72
J9F70			LDAB	#$1C
Z9F72			JMP	JA005
Z9F75			LDAB	M7774
			LDAA	M7789
			CMPA	M778D
			BLS	Z9F84
			CLRA
			STAA	M7789
Z9F84			JSR	JMPOFF1
D9F87			FCB	$24,$02,$70,$03,$40,$04,$42,$05,$1C,$07,$46,$08,$18
			FCB	$09,$46,$0A,$48,$0B,$12,$15,$48,$16,$0E,$18,$48,$19
			FCB	$4A,$1A,$4C,$1B,$4E,$1C,$50,$1D,$02,$00
Z9FAB			RTS
Z9FAC			LDAA	M7774
			CMPA	#$15
			BNE	Z9FBD
			LDAA	M7789
			CMPA	#$0C
			BNE	Z9FAB
			JMP	ZA13A
Z9FBD			CMPA	#$1B
			BNE	Z9FC4
			JMP	ZA098
Z9FC4			CMPA	#$1C
			BNE	Z9FAB
			JMP	ZA017
			ADDA	#$06
			BRA	Z9FF9
Z9FCF			SUBA	#$03
			BPL	Z9FCF
			ADDA	#$0D
			BRA	Z9FF9
			ADDA	#$0D
			BRA	Z9FF9
			ADDA	#$13
			BRA	Z9FF9
			ADDA	#$15
			BRA	Z9FF9
			ADDA	#$25
			BRA	Z9FF9
			ADDA	#$32
			BRA	Z9FF9
			ADDA	#$3D
			BRA	Z9FF9
			ADDA	#$41
			BRA	Z9FF9
			LDAA	#$44
			BRA	Z9FF9
			ADDA	#$45
Z9FF9			TAB
			CMPB	#$49
			BCS	Z9FFF
			CLRB
Z9FFF			ASLB
			LDX	#DVEC_STRINGS_2
			BRA	ZA00E
JA005			CMPB	#$1D
			BCS	ZA00A
			CLRB
ZA00A			ASLB
			LDX	#DVEC_STRINGS
ZA00E			ABX
			LDX	,X
			JSR	PUTSTRX
			JMP	ZA174
ZA017			LDAB	M7789
			BEQ	ZA023
			CMPB	#$02
			BEQ	ZA03C
			JMP	ZA0D5
ZA023			LDAB	M778A
			ADDB	#$3C
			JSR	F_B43F
			LDX	M00A7
			INX
			INX
			INX
			STX	M00A7
			LDAB	#$3A
			JSR	PUTCHAR
			LDX	#M7628
			BRA	ZA051
ZA03C			LDAB	M778A
			JSR	F_B43F
			LDX	M00A7
			INX
			INX
			INX
			STX	M00A7
			LDAB	#$3A
			JSR	PUTCHAR
			LDX	#M7640
ZA051			LDAB	M778A
			ASLB
			ABX
			LDAB	$01,X
			CMPB	#$21
			BCS	ZA061
			LDAB	,X
			INCB
			BRA	ZA063
ZA061			LDAB	,X
ZA063			PSHX
			JSR	F_B43F
			LDX	M00A7
			INX
			INX
			INX
			INX
			STX	M00A7
			PULX
			LDAA	$01,X
			PSHX
			CMPA	#$21
			BCS	ZA081
			COMA
			SUBA	#$BF
			LDAB	#$2D
			JSR	PUTCHAR
			BRA	ZA086
ZA081			LDAB	#$2B
			JSR	PUTCHAR
ZA086			CLRB
			JSR	F_9BD1
			PULX
			LDD	,X
			SUBA	#$0D
			ASLB
			ASLB
			LSRD
			LSRD
			JSR	F_9C2A
			BRA	ZA0D1
ZA098			CLRB
ZA099			PSHB
			LDAB	#$04
			LDAA	M7789
			MUL
			PULA
			PSHA
			ABA
			TAB
			LDX	#M75F8
			ABX
			LDAB	,X
			CMPB	#$31
			BCC	ZA0BF
			ADDB	M7789
			ADDB	#$24
			JSR	F_B43F
			LDX	M00A7
			INX
			INX
			INX
			STX	M00A7
			BRA	ZA0C2
ZA0BF			JSR	F_A5F0
ZA0C2			PULB
			CMPB	#$03
			BEQ	ZA0D1
			PSHB
			LDAB	#$2F
			JSR	PUTCHAR
			PULB
			INCB
			BRA	ZA099
ZA0D1			CLRB
			JMP	ZA174
ZA0D5			LDAA	M778A
			INCA
			CMPA	#$0A
			BCS	ZA0E2
			JSR	F_9BD1
			BRA	ZA0E5
ZA0E2			JSR	F_9BD7
ZA0E5			LDAB	#$3A
			JSR	PUTCHAR
			LDAB	M778A
			ASLB
			LDX	#DVEC_SCALE_NAMES
			ABX
			LDX	,X
			JSR	PUTSTRX
			TSTB
			BEQ	ZA121
			LDAB	M778F
			CMPB	#$0C
			BCS	ZA102
			CLRB
ZA102			LDAA	M778A
			CMPA	#$02
			BNE	ZA117
			ADDB	#$09
			CMPB	#$0C
			BCS	ZA111
			SUBB	#$0C
ZA111			ASLB
			LDX	#S_SHARPS
			BRA	ZA11B
ZA117			ASLB
			LDX	#S_FLATS
ZA11B			ABX
			LDD	,X
			STD	M7DC9
ZA121			CLRB
			BRA	ZA174

DVEC_SCALE_NAMES	FDB     S_EQUAL
			FDB     S_PURE_MAJOR
			FDB     S_PURE_MINOR
			FDB     S_MEAN_TONE
			FDB     S_PYTHAGOREAN
			FDB     S_WERCKMEISTER
			FDB     S_KIRNBERGER
			FDB     S_VALLOTTI_YOUNG
			FDB     S_1_4_SHIFT_EQUAL
			FDB     S_1_4_TONE
			FDB     S_1_8_TONE

ZA13A			LDX	#S__PGM
			JSR	PUTSTRX
			LDAA	M778A
			INCA
			CLRB
			JSR	F_9BCA
			LDX	#S__EQUALS__
			JSR	PUTSTRX
			LDX	M7781
			LDAA	,X
			CMPA	#$A0
			BCC	ZA15C
			JSR	F_AF7D
			BRA	ZA173
ZA15C			CMPA	#$B8
			BCS	ZA162
			LDAA	#$A0
ZA162			LDAB	#$50
			JSR	PUTCHAR
			LDAB	#$46
			JSR	PUTCHAR
			SUBA	#$9F
			LDAB	#$01
			JSR	F_9BD1
ZA173			CLRB
ZA174			CMPB	#$20
			BCS	ZA179
			CLRB
ZA179			LDX	#CVEC_A182
			ASLB
			ABX
			LDX	,X
			JMP	,X

CVEC_A182		FDB     F_9B87
			FDB     MA1CD
			FDB     MA1D6
			FDB     MA1E0
			FDB     MA2AC
			FDB     MA370
			FDB     MA37E
			FDB     MA3B0
			FDB     MA3BF
			FDB     MA3D2
			FDB     MA3E4
			FDB     MA424
			FDB     MA386
			FDB     MA390
			FDB     MA3A5
			FDB     MA452
			FDB     MA42E
			FDB     MA485
			FDB     MA494
			FDB     MA4DE
			FDB     MA4DA
			FDB     MA600
			FDB     MA66E
			FDB     MA67D
			FDB     MA699
			FDB     MA6AE
			FDB     MA6CA
			FDB     MA6D4
			FDB     MA6E4
			FDB     MA705
			FDB     MA74A
			FDB     MA75A

F_A1C2			LDAB	#$3D
F_A1C4			JSR	PUTCHAR
F_A1C7			LDX	M7781
			LDAA	,X
			RTS

MA1CD			BSR	F_A1C2
			CLRB
			JSR	F_9BD1
			JMP	F_9B87
MA1D6			LDAB	#$3A
			BSR	F_A1C4
			JSR	F_B432
			JMP	F_9B87
MA1E0			LDAB	M777B
			LDAA	#$05
			JSR	F_B533
			TST	$57,X
			BEQ	ZA1EF
			JMP	ZA26F
ZA1EF			PSHX
			LDX	#S_RATIO
			JSR	PUTSTRX
			LDAB	#$3D
			JSR	PUTCHAR
			JSR	F_B52E
			LDAB	$0B,X
			LDX	#DB4EA
			ABX
			LDAB	,X
			TBA
			ANDB	#$03
			LDX	#D_A2A8
			ABX
			LDAB	,X
			PULX
			ANDA	#$3C
			BNE	ZA218
			LDAA	#$08
			BRA	ZA21A
ZA218			ASLA
			ASLA
ZA21A			ADDA	$59,X
			CMPB	#$8D
			BNE	ZA258
			TST	$59,X
			BNE	ZA258
			CMPA	#$30
			BCS	ZA258
			CMPA	#$50
			BCS	ZA240
			CMPA	#$90
			BCS	ZA246
			BEQ	ZA24C
			CMPA	#$B0
			BCS	ZA258
			CMPA	#$F0
			BCS	ZA252
			MUL
			ADDD	#$0050
			BRA	ZA259
ZA240			MUL
			ADDD	#$0010
			BRA	ZA259
ZA246			MUL
			ADDD	#$0020
			BRA	ZA259
ZA24C			MUL
			ADDD	#$0030
			BRA	ZA259
ZA252			MUL
			ADDD	#$0040
			BRA	ZA259
ZA258			MUL
ZA259			LSRD
			LSRD
			LSRD
			LSRD
			XGDX
			CPX	#$0046
			BEQ	ZA268
			CPX	#$0056
			BNE	ZA269
ZA268			INX
ZA269			JSR	F_9C86
ZA26C			JMP	F_9B87
ZA26F			PSHX
			LDX	#S_FIX
			JSR	PUTSTRX
			LDAB	#$3D
			JSR	PUTCHAR
			JSR	F_B52E
			LDAB	$0B,X
			ANDB	#$3C
			BNE	ZA288
			LDAB	#$08
			BRA	ZA28A
ZA288			ASLB
			ASLB
ZA28A			PULX
			ADDB	$59,X
			PSHB
			CLRA
			LDAB	$58,X
			XGDX
			PULB
			CLRA
			CPX	#$0000
			BEQ	ZA29D
ZA299			ASLD
			DEX
			BNE	ZA299
ZA29D			JSR	F_9C2A
			LDD	#$487A
			STD	M7DC9
			BRA	ZA26C

D_A2A8			FCB	$64,$8D,$9D,$AD

MA2AC			LDAB	M7774
			CMPB	#$05
			BNE	ZA2B8
			LDX	#M7DAF
			BRA	ZA2BB
ZA2B8			LDX	#M7DBF
ZA2BB			STX	M00A7
			JSR	SET_CGCHAR_SET
			CLRB
ZA2C1			PSHB
			LDX	#DB52A
			ABX
			LDAB	,X
			LDAA	M7787
			CMPA	#$57
			BCC	ZA2D3
			LDAA	#$0D
			BRA	ZA2D5
ZA2D3			LDAA	#$05
ZA2D5			MUL
			ADDB	M7787
			LDX	M7784
			ABX
			LDAA	,X
			LDAB	M7787
			CMPB	#$5B
			BNE	ZA2FD
			TSTA
			BNE	ZA2F1
			LDX	#S__OF
			JSR	PUTSTRX
			BRA	ZA338
ZA2F1			COMA
			SUBA	#$FB
			LDAB	#$06
ZA2F6			ASLB
			DECA
			BNE	ZA2F6
			TBA
			BRA	ZA335
ZA2FD			CMPB	#$0C
			BNE	ZA305
			BSR	F_A351
			BRA	ZA338
ZA305			CMPB	#$5A
			BNE	ZA335
			PSHA
			TAB
			ASLB
			LDX	#D_A341
			ABX
			LDD	,X
			LDX	M00A7
			INX
			STX	M00A7
			JSR	PUTCHAR
			TAB
			JSR	PUTCHAR
			PULA
			LDX	M00A7
			PSHX
			LDAB	#$0E
			ABX
			STX	M00A7
			LDAB	#$57
			JSR	PUTCHAR
			INCA
			JSR	F_9BD7
			PULX
			STX	M00A7
			BRA	ZA338
ZA335			JSR	F_9BCA
ZA338			PULB
			INCB
			CMPB	#$04
			BNE	ZA2C1
			JMP	F_9B87

D_A341			FCB	$01,$00,$03,$02,$2D,$00,$2D,$02,$2D,$04,$2D,$05,$2D
			FCB	$06,$2D,$07

F_A351			LDAB	#$20
			JSR	PUTCHAR
			SUBA	#$03
			BHI	ZA362
			BMI	ZA366
			CLRB
			JSR	F_9BD1
			BRA	ZA36F
ZA362			LDAB	#$2B
			BRA	ZA369
ZA366			NEGA
			LDAB	#$2D
ZA369			JSR	PUTCHAR
			JSR	F_9BD7
ZA36F			RTS
MA370			JSR	F_A1C2
			LDAB	M6AA5
			ADDB	#$24
			JSR	F_B43F
ZA37B			JMP	F_9B87
MA37E			JSR	F_A1C2
			JSR	F_B463
			BRA	ZA37B
MA386			JSR	F_A1C2
			SUBA	#$18
			JSR	F_B465
			BRA	ZA37B
MA390			LDAB	#$3A
			JSR	F_A1C4
			TAB
			ASLB
			LDX	#DVEC_A39F
			ABX
			LDX	,X
			BRA	ZA3BC

DVEC_A39F		FDB	S_NOTE_ALL
			FDB	S_NOTE_ODD
			FDB	S_NOTE_EVEN

MA3A5			LDX	#M7DC1
			STX	M00A7
			JSR	F_AFD8
			JMP	F_9B87
MA3B0			JSR	F_A1C7
			LDX	#S_MONO
			TSTA
			BNE	ZA3BC
			LDX	#S_POLY
ZA3BC			JMP	F_9BC4
MA3BF			TST	M6AA6
			BEQ	ZA3CD
			JSR	F_A1C7
			LDX	#S_FINGERED
			TSTA
			BNE	ZA3BC
ZA3CD			LDX	#S_FULL_TIME
			BRA	ZA3BC
MA3D2			JSR	F_A1C2
			CMPA	#$04
			BCS	ZA3DA
			CLRA
ZA3DA			LDX	#DVEC_LFO_MODE
			TAB
			ASLB
			ABX
			LDX	,X
			BRA	ZA3BC
MA3E4			LDAB	#$3D
			JSR	PUTCHAR
			LDX	#M7DBF
			STX	M00A7
			CLRB
ZA3EF			PSHB
			LDX	#DB52A
			ABX
			LDAB	,X
			LDAA	#$0D
			MUL
			ADDB	#$08
			LDX	M7784
			ABX
			TST	,X
			BNE	ZA408
			LDX	#S__OF
			BRA	ZA40B
ZA408			LDX	#S__ON
ZA40B			JSR	PUTSTRX
			PULB
			INCB
			CMPB	#$04
			BNE	ZA3EF
			LDX	M7784
			LDAA	$3D,X
			LDX	#M7DBF
			STX	M00A7
			JSR	F_9BD7
MA421			JMP	F_9B87
MA424			JSR	F_A1C2
ZA427			INCA
			CLRB
			JSR	F_9BD1
			BRA	MA421
MA42E			LDAB	#$3D
			JSR	PUTCHAR
			JSR	F_B53E
			LDAB	M7774
			CMPB	#$03
			BNE	ZA445
			LDAA	$3C,X
			CLRB
			JSR	F_9BD1
			BRA	MA421
ZA445			LDAA	$34,X
			PSHA
			INCA
			JSR	F_9BD7
			PULA
			JSR	F_B22C
			BRA	MA421
MA452			LDAB	M7774
			CMPB	#$15
			BNE	ZA470
			LDX	#M7DC8
			STX	M00A7
			LDAB	M777E
			BNE	ZA467
			LDAB	#$49
			BRA	ZA46A
ZA467			DECB
			ADDB	#$41
ZA46A			JSR	PUTCHAR
			JMP	F_9B87
ZA470			LDX	#M7DC7
			STX	M00A7
			TST	M777E
			BNE	ZA47F
			LDX	#S_TX
			BRA	ZA482
ZA47F			LDX	#S_DX
ZA482			JMP	F_9BC4
MA485			JSR	F_A1C2
			CMPA	#$10
			BEQ	ZA48F
			JMP	ZA427
ZA48F			LDX	#S_OMN
			BRA	ZA482
MA494			LDAB	#$3D
			JSR	PUTCHAR
			LDAB	M777B
			LDAA	#$05
			JSR	F_B533
			LDAA	$58,X
			CMPA	#$01
			BHI	ZA4C4
			BEQ	ZA4B0
			LDAA	#$FF
			JSR	F_9BCA
			BRA	ZA4BB
ZA4B0			LDD	#$3531
			STD	M7DC6
			LDAB	#$30
			STAB	M7DC8
ZA4BB			LDD	#$487A
			STD	M7DC9
			JMP	F_9B87
ZA4C4			SUBA	#$01
			LDAB	#$01
ZA4C8			DECA
			BEQ	ZA4CE
			ASLB
			BRA	ZA4C8
ZA4CE			TBA
			CLRB
			JSR	F_9BD1
			LDAB	#$4B
			JSR	PUTCHAR
			BRA	ZA4BB
MA4DA			LDAB	#$30
			BRA	ZA4DF
MA4DE			CLRB
ZA4DF			LDAA	M7787
			CMPA	#$60
			BEQ	ZA4EA
			CMPA	#$63
			BNE	ZA4EC
ZA4EA			LDAA	#$0B
ZA4EC			LDX	#M7DBB
			TSTB
			BEQ	ZA4F3
			INX
ZA4F3			STX	M00A7
			LDX	#M6DD7
			ABX
			TAB
			LDAA	#$04
ZA4FC			PSHA
			PSHB
			PSHX
			TSTB
			BEQ	ZA509
			TST	,X
			BNE	ZA509
			JMP	ZA5E2
ZA509			ABX
			LDAA	,X
			LDAB	M7774
			JSR	JMPOFF1
DA512			FCB	$1C,$29,$1E,$2A,$22,$2B,$26,$2C,$3B,$2E,$46,$2F,$30
			FCB	$30,$0E,$31,$47,$32,$75,$33,$9D,$34,$06,$3C,$0E,$3D
			FCB	$02,$00
			PULX
			PULB
			PULA
			RTS
ZA532			JSR	F_9BCA
			JMP	ZA5CE
			JSR	F_AF91
			JMP	ZA5CE
			CMPA	#$10
			BNE	ZA54B
			LDX	#S_OMN
			JSR	PUTSTRX
			JMP	ZA5CE
ZA54B			INCA
			BRA	ZA532
			SUBA	#$18
			JSR	F_B465
			BRA	ZA5CE
			TAB
			JSR	F_B43F
			LDD	M00A7
			ADDD	#PORT2
			STD	M00A7
			BRA	ZA5CE
			SUBA	#$07
			JSR	F_B465
			BRA	ZA5CE
			PSHA
			JSR	F_B37F
			PULB
			TSTB
			BEQ	ZA59C
			CMPB	#$01
			BNE	ZA57E
			LDAB	#$02
			JSR	F_9CD8
			LDAB	#$49
			BRA	ZA594
ZA57E			CMPB	#$02
			BNE	ZA589
			LDAB	#$02
			JSR	F_9CD8
			BRA	ZA593
ZA589			LDAB	#$01
			JSR	F_9CD8
			LDAB	#$49
			JSR	PUTCHAR
ZA593			CLRB
ZA594			JSR	PUTCHAR
			BRA	ZA5CE
			TSTA
			BNE	ZA5A1
ZA59C			LDX	#S_OFF
			BRA	ZA5BE
ZA5A1			CMPA	#$03
			BCC	ZA5BB
			CMPA	#$01
			BNE	ZA5B0
			LDAA	M784E
			BMI	ZA5E6
			BRA	ZA5B5
ZA5B0			LDAA	M784F
			BMI	ZA5E6
ZA5B5			INCA
			JSR	F_9BCA
			BRA	ZA5CE
ZA5BB			LDX	#S_VIB
ZA5BE			JSR	PUTSTRX
			BRA	ZA5CE
			TSTA
			BEQ	ZA5CB
			LDX	M00A7
			INX
			STX	M00A7
ZA5CB			JSR	F_B432
ZA5CE			LDX	M00A7
			INX
			STX	M00A7
			PULX
			LDAB	#$0C
			ABX
			PULB
			PULA
			DECA
			BEQ	ZA5DF
			JMP	ZA4FC
ZA5DF			JMP	F_9B87
ZA5E2			BSR	F_A5F0
			BRA	ZA5CE
ZA5E6			LDX	#S_DASHDASHDASH
			JMP	ZA5BE

S_DASHDASHDASH		FCC	"---"
			FCB	$00

F_A5F0			LDAB	#$01
			JSR	F_9CD8
			LDAB	#$2A
			JSR	PUTCHAR
			LDAB	#$01
			JSR	F_9CD8
			RTS
MA600			TST	>M00A3
			BNE	ZA608
			JSR	F_B408
ZA608			LDAB	M778C
			CMPB	#$04
			BCC	ZA619
			LDAB	#$7E
			STAB	M7DCA
			LDX	#M6DD7
			BRA	ZA621
ZA619			LDAB	#$7F
ZA61B			JSR	PUTCHAR
			LDX	#M6E07
ZA621			LDAB	#$04
ZA623			PSHB
			PSHX
			TST	,X
			BNE	ZA62D
			BSR	F_A5F0
			BRA	ZA663
ZA62D			LDAA	$08,X
			CLRB
			JSR	F_9BD1
			PULX
			LDAA	$08,X
			PSHX
			JSR	F_B4DE
			CMPA	#$08
			BCC	ZA64C
			TSTA
			BNE	ZA648
			LDX	M00A7
			INX
			STX	M00A7
			BRA	ZA663
ZA648			DECA
			TAB
			BRA	ZA660
ZA64C			CMPA	#$0F
			BCS	ZA652
			LDAA	#$0E
ZA652			SUBA	#$08
			TAB
			LDX	M00A7
			XGDX
			SUBD	#RMCR
			XGDX
			STAB	,X
			LDAB	#$06
ZA660			JSR	PUTCHAR
ZA663			PULX
			LDAB	#$0C
			ABX
			PULB
			DECB
			BNE	ZA623
			JMP	F_9B87
MA66E			JSR	F_A1C2
			LDX	#S_NORM
			TSTA
			BEQ	ZA67A
			LDX	#S_ALTR
ZA67A			JMP	F_9BC4
MA67D			JSR	F_A1C2
			TAB
			CMPB	#$04
			BCS	ZA687
			LDAB	#$03
ZA687			ASLB
			LDX	#DVEC_FX_TYPE
			ABX
			LDX	,X
			JMP	F_9BC4

; string vector table
DVEC_FX_TYPE		FDB	S_OFF
			FDB	S_FX_DELAY
			FDB	S_FX_PAN
			FDB	S_FX_CHORD

MA699			JSR	F_A1C2
			TSTA
			BNE	ZA6A7
			LDX	#S_OFF
			JSR	PUTSTRX
			BRA	ZA6AB
ZA6A7			CLRB
			JSR	F_9BD1
ZA6AB			JMP	F_9B87
MA6AE			JSR	F_A1C2
			TAB
			ASLB
			LDX	#DVEC_A6BC
			ABX
			LDX	,X
			JMP	F_9BC4

DVEC_A6BC		FDB	S_OFF
			FDB	S_COM
			FDB	S_IND

S_COM			FCC	"com"
			FCB	$00

S_IND			FCC	"ind"
			FCB	$00

MA6CA			JSR	F_A1C2
			SUBA	#$32
			JSR	F_B465
			BRA	ZA6AB
MA6D4			JSR	F_A1C2
			TAB
			INCB
			CLRA
			JSR	F_9C9F
			LDAB	#$73
			JSR	PUTCHAR
			BRA	ZA6AB
MA6E4			JSR	F_A1C2
			CMPA	#$02
			BCC	ZA6F9
			TSTA
			BNE	ZA6F3
			LDX	#S_OFF
			BRA	ZA6F6
ZA6F3			LDX	#S_NORM
ZA6F6			JMP	F_9BC4
ZA6F9			DECA
			LDAB	#$47
			JSR	PUTCHAR
			CLRB
			JSR	F_9BD1
			BRA	ZA6AB
MA705			TST	M7789
			BNE	ZA718
			JSR	F_A1C2
			TAB
			ASLB
			LDX	#DVEC_PAN_SOURCE
			ABX
			LDX	,X
			JMP	F_9BC4
ZA718			JSR	F_B37F
			LDAB	#$3A
			JSR	F_A1C4
			TSTA
			BNE	ZA733
			LDAB	#$49
			JSR	PUTCHAR
			LDAB	#$7E
			JSR	PUTCHAR
			CLRB
			JSR	PUTCHAR
			BRA	ZA741
ZA733			CLRB
			JSR	PUTCHAR
			LDAB	#$7E
			JSR	PUTCHAR
			LDAB	#$49
			JSR	PUTCHAR
ZA741			JMP	F_9B87

; string vector table
DVEC_PAN_SOURCE		FDB	S_PAN_LFO
			FDB	S_PAN_VELOCITY
			FDB	S_PAN_NOTE

MA74A			LDX	#M7DC8
			STX	M00A7
			LDAB	M7789
			ADDB	#$3C
			JSR	F_B43F
			JMP	F_9B87
MA75A			LDX	#M7DC7
			STX	M00A7
			LDX	#DVEC_A76C
			LDAB	M777E
			ASLB
			ABX
			LDX	,X
			JMP	F_9BC4

DVEC_A76C		FDB	S_AL_3
			FDB	S_SY_3
			FDB	S_PC_3
			FDB	S_EF_3
			FDB	S_MC_3

DVEC_LFO_MODE		FDB	S_SAW_UP
			FDB	S_SQUARE
			FDB	S_TRIANGL
			FDB	S_S_HOLD

DVEC_STRINGS		FDB	S_ALG
			FDB	S_FEEDBACK_OP4
			FDB	S_LFO
			FDB	S_SENSITIVITY
			FDB	S_FREQUENCY
			FDB	S_OSW
			FDB	S_DET
			FDB	S_EG
			FDB	S_OUT
			FDB	S_SCALING
			FDB	S___FUNCTION
			FDB	S_MASTER_TUNE
			FDB	S_MIDI_CONTROL
			FDB	S_MEM_PROTECT
			FDB	S_COMBINE
			FDB	S_CASS_CONTROL
			FDB	S_EDIT_EFFECT_1_
			FDB	S_EDIT_EFFECT_2_
			FDB	S_EDIT_EFFECT_3_
			FDB	S_MICRO_TUNE
			FDB	S_INIT_VOICE_1
			FDB	S_RECALL_EDIT_1
			FDB	S_ASSIGN
			FDB	MAD2E_via_dvec_a7ac
			FDB	MAD3F_via_dvec_a7ae
			FDB	S_VOL
			FDB	S_SEL
			FDB	S_INIT_3
			FDB	S_TEST_ENTRY

DVEC_STRINGS_2		FDB	S_WAVE
			FDB	S_SPEED
			FDB	S_DELAY
			FDB	S_P_MOD_DEPTH
			FDB	S_A_MOD_DEPTH
			FDB	S_SYNC
			FDB	S_P_MOD_SENS
			FDB	S_AMS
			FDB	S_EBS
			FDB	S_KVS
			FDB	S_FIX_RANGE
			FDB	S_CRS
			FDB	S_FIN
			FDB	S_AR
			FDB	S_D1R
			FDB	S_D1L
			FDB	S_D2R
			FDB	S_RR
			FDB	S_SHFT
			FDB	S_RS
			FDB	S_LS
			FDB	MAB5C_via_dvec_a7e2
			FDB	S_P_BEND_RANGE
			FDB	MAB7A_via_dvec_a7e6
			FDB	S_TIME
			FDB	S_FC_VOLUME
			FDB	S_FC_1
			FDB	S_FC_2
			FDB	S_MW_1
			FDB	S_MW_2
			FDB	MABBC_via_dvec_a7f4
			FDB	MABBF_via_dvec_a7f6
			FDB	S_P_BIAS
			FDB	S_EG_BIAS
			FDB	S_MIDDLE_C
			FDB	S_REVERB_RATE
			FDB	S_NAME
			FDB	S_BASIC_RECV_CH
			FDB	S_CH
			FDB	S_P_CHANGE
			FDB	S_CONT_CHANGE
			FDB	S_ATOUCH_BC
			FDB	S_PITCHBEND
			FDB	S_NOTE_ON_OFF
			FDB	S_EXCLUSIVE
			FDB	S_VOICE_TRANS
			FDB	S_PERFRM
			FDB	S_SETUP_TRANS
			FDB	S_INIT
			FDB	MA9FA_via_dvec_a81a
			FDB	S_SAVE_32_VOICE
			FDB	S_VERIFY_2
			FDB	S_LOAD
			FDB	S_LOAD_1_VOICE
			FDB	S_SAVE_24
			FDB	S_VERIFY_24
			FDB	S_LOAD_24
			FDB	S_LOAD_1
			FDB	S_SAVE_SETUP
			FDB	S_VERIFY_SETUP
			FDB	S_LOAD_SETUP
			FDB	S_DELAY_TIME
			FDB	S_PITCH_SHIFT
			FDB	S_FEEDBACK
			FDB	S_LEVEL
			FDB	S_SELECT
			FDB	S_DIRECTION
			FDB	S_PAN_RANGE
			FDB	S_KEY_ON_NOTE
			FDB	S_OCTAVE
			FDB	S_INIT_OCTAVE
			FDB	MAB46_via_dvec_a846
			FDB	S_INIT_2

S_MEM_STR		FCC	"Mem Str	?"
			FCB	$00
S_EG_COPY_OP_OP		FCC	"EG Copy OP  OP ?"
			FCB	$00
S_ARE_YOU_SURE		FCC	" Are you sure?"
			FCB	$00
S_ALG			FCC	"ALG"
			FCB	$10
S_FEEDBACK_OP4		FCC	"Feedback(OP4)"
			FCB	$01
S_LFO			FCC	" "
			FCB	$AE
			FCC	"LFO?"
			FCB	$00
S_WAVE			FCC	" Wave "
			FCB	$09
S_SPEED			FCC	" Speed"
			FCB	$01
S_DELAY			FCC	" Delay"
			FCB	$01
S_P_MOD_DEPTH		FCC	"P Mod Depth"
			FCB	$01
S_A_MOD_DEPTH		FCC	"A Mod Depth"
			FCB	$01
S_SYNC			FCC	" Sync"
			FCB	$02
S_SENSITIVITY		FCC	" Sensitivity?"
			FCB	$00
S_P_MOD_SENS		FCC	"P Mod Sens. "
			FCB	$10
S_AMS			FCC	"AMS"
			FCB	$0A
S_EBS			FCC	"EBS"
			FCB	$04
S_KVS			FCC	"KVS"
			FCB	$04
S_FREQUENCY		FCB	$AE
			FCC	"Frequency?"
			FCB	$00
S_FIX_RANGE		FCC	"Fix Range "
			FCB	$12
S_CRS			FCC	"CRS("
			FCB	$03
S_FIN			FCC	"FIN("
			FCB	$03
S_OSW			FCC	"OSW"
			FCB	$04
S_DET			FCC	"DET"
			FCB	$04
S_EG			FCB	$AE
			FCC	"EG?"
			FCB	$00
S_AR			FCC	"AR "
			FCB	$04
S_D1R			FCC	"D1R"
			FCB	$04
S_D1L			FCC	"D1L"
			FCB	$04
S_D2R			FCC	"D2R"
			FCB	$04
S_RR			FCC	"RR "
			FCB	$04
S_SHFT			FCC	"SHFT"
			FCB	$04
S_OUT			FCC	"OUT"
			FCB	$04
S_SCALING		FCC	" Scaling?"
			FCB	$00
S_RS			FCC	"RS "
			FCB	$04
S_LS			FCC	"LS "
			FCB	$04
S_MIDDLE_C		FCC	"Middle C    "
			FCB	$05
S_MASTER_TUNE		FCC	"Master Tune "
			FCB	$06
S_MIDI_CONTROL		FCC	"Midi Control?"
			FCB	$00
S_CONT_CHANGE		FCC	"Cont.Change"
			FCB	$1C
S_ATOUCH_BC		FCC	"A.Touch ~ BC"
			FCB	$02
S_BASIC_RECV_CH		FCC	"Basic Rcv.Ch"
			FCB	$11
S_CH			FCB	$BC
			FCC	" Ch"
			FCB	$0B
S_P_CHANGE		FCC	" P.Change "
			FCB	$19
S_PITCHBEND		FCC	" Pitch Bend"
			FCB	$1C
S_NOTE_ON_OFF		FCC	"Note on/off"
			FCB	$0D
S_EXCLUSIVE		FCC	" Exclusive"
			FCB	$02
S_VOICE_TRANS		FCC	"Voice Trans?( )"
			FCB	$0F
S_PERFRM		FCC	"Perfrm "
			FCB	$BC
			FCC	"?"
			FCB	$00
S_SETUP_TRANS		FCC	"Setup Trans?"
			FCB	$1F
S_INIT			FCC	"Init "
			FCB	$C5,$00
MA9FA_via_dvec_a81a	FCB	$AE,$C5
			FCB	$00
S_CASS_CONTROL		FCC	"Cass. Control ?"
			FCB	$00
S_RECALL_EDIT_1		FCC	"Recall Edit?"
			FCB	$00
S_INIT_VOICE_1		FCC	"Init Voice?"
			FCB	$00
S_SAVE_32_VOICE		FCC	"Save32Voice?"
			FCB	$0F
S_VERIFY_2		FCC	"Verify "
			FCB	$80,$00
S_LOAD			FCC	"Load "
			FCB	$80,$00
S_LOAD_1_VOICE		FCC	"Load 1 Voice?"
			FCB	$00
S_SAVE_24		FCC	"Save 24 "
			FCB	$B4,$00
S_VERIFY_24		FCC	"Verify 24"
			FCB	$B4,$00
S_LOAD_24		FCC	"Load 24 "
			FCB	$B4,$00
S_LOAD_1		FCC	"Load 1 "
			FCB	$B4,$00
S_SAVE_SETUP		FCC	"Save Setup? "
			FCB	$1F
S_VERIFY_SETUP		FCC	"VerifySetup?"
			FCB	$1F
S_LOAD_SETUP		FCC	"Load Setup? "
			FCB	$1F
S_MEM_PROTECT		FCC	"Mem Protect"
			FCB	$02
S_COMBINE		FCC	" Combine  "
			FCB	$02
S_EDIT_EFFECT_1_	FCB	SO_EDIT_ - SO__BASE
			FCB	SO_EFFECT_ - SO__BASE
			FCC	" 1 ?"
			FCB	$00
S_DELAY_TIME		FCC	"Delay Time"
			FCB	$1B
S_PITCH_SHIFT		FCC	"Pitch Shift"
			FCB	$0C
S_LEVEL			FCB	$D0
			FCC	"Level "
			FCB	$01
S_FEEDBACK		FCC	" Feedback"
			FCB	$01
S_EDIT_EFFECT_2_	FCB	$AE,$D0
			FCC	" 2 ?"
			FCB	$00
S_DIRECTION		FCC	"Direction "
			FCB	$1D
S_SELECT		FCC	"Select "
			FCB	$1D
S_PAN_RANGE		FCC	" Pan Range "
			FCB	$01
S_EDIT_EFFECT_3_	FCB	$AE,$D0
			FCC	" 3 ?"
			FCB	$00
S_KEY_ON_NOTE		FCC	"Key on note?"
			FCB	$1E
S_MICRO_TUNE		FCB	$AE
			FCC	"Micro Tune?"
			FCB	$00
S_OCTAVE		FCB	$AE
			FCC	"Octave ?"
			FCB	$00
S_INIT_OCTAVE		FCC	"Init Octave ?"
			FCB	$00
MAB46_via_dvec_a846	FCB	$AE,$D8
			FCB	$00
S_INIT_2		FCC	"Init "
			FCB	$D8,$00
S___FUNCTION		FCC	"  Function?"
			FCB	$00
MAB5C_via_dvec_a7e2	FCB	$07
S_POLY			FCC	"  Poly"
			FCB	$8A,$00
S_MONO			FCC	"  Mono"
			FCB	$8A,$00
S_P_BEND_RANGE		FCC	"P Bend Range"
			FCB	$01
MAB7A_via_dvec_a7e6	FCB	$08
S_FULL_TIME		FCC	"Full Time "
			FCB	$90,$00
S_FINGERED		FCC	"Fingered "
			FCB	$90,$00
S_TIME			FCB	$90
			FCC	" Time	"
			FCB	$01
S_FC_VOLUME		FCC	"FC Volume   "
			FCB	$01
S_FC_1			FCC	"FC "
			FCB	$A4,$01
S_FC_2			FCC	"FC "
			FCB	$9A,$01
S_MW_1			FCC	"MW "
			FCB	$A4,$01
S_MW_2			FCC	"MW "
			FCB	$9A,$01
MABBC_via_dvec_a7f4	FCB	$96,$A4,$01
MABBF_via_dvec_a7f6	FCB	$96,$9A,$01
S_P_BIAS		FCB	$96
			FCC	"P. Bias  "
			FCB	$1A
S_EG_BIAS		FCB	$96
			FCC	"EG Bias  "
			FCB	$01
S_REVERB_RATE		FCC	"Reverb Rate "
			FCB	$18
S_ASSIGN		FCC	"Assign"
			FCB	$8A,$16
S_VOL			FCC	"VOL"

SO__BASE		FCB	$15

S_SEL			FCB	$D0
			FCC	"Sel"
			FCB	$17
S_INIT_3		FCC	"Init "
			FCB	$B4,$00
S_TEST_ENTRY		FCC	"Test entry?"
			FCB	$00

S_SAW_UP		FCC	"saw up"
			FCB	$00
S_SQUARE		FCC	"square"
			FCB	$00
S_TRIANGL		FCC	"triangl"
			FCB	$00
S_S_HOLD		FCC	"S/Hold"
			FCB	$00

S_NOTE_ALL		FCC	"all "
			FCB	$00
S_NOTE_ODD		FCC	"odd "
			FCB	$00
S_NOTE_EVEN		FCC	"even"
			FCB	$00

S_FX_DELAY		FCC	"delay"
			FCB	$00
S_FX_PAN		FCC	"pan"
			FCB	$00
S_FX_CHORD		FCC	"chord"
			FCB	$00

S_PAN_LFO		FCC	"LFO"
			FCB	$00
S_PAN_VELOCITY		FCC	"velocity"
			FCB	$00
S_PAN_NOTE		FCC	"note"
			FCB	$00

S_AL_3			FCC	"(AL)"
			FCB	$00
S_SY_3			FCC	"(SY)"
			FCB	$00
S_PC_3			FCC	"(PC)"
			FCB	$00
S_EF_3			FCC	"(EF)"
			FCB	$00
S_MC_3			FCC	"(MC)"
			FCB	$00

SO_32_Voice_		FCC	"32 Voice?"
			FCB	$00
SO__MODE		FCC	" Mode"
			FCB	$00
SO_PORTA		FCC	"Porta"
			FCB	$00
SO_BC_			FCC	"BC "
			FCB	$00
SO_AMPLITUDE		FCC	"Amplitude"
			FCB	$00
SO_PITCH____		FCC	"Pitch	  "
			FCB	$00
SO_EDIT_		FCC	"Edit "
			FCB	$00
SO_PERFRM_		FCC	"Perfrm?"
			FCB	$00
SO_TRANSMIT		FCC	"Transmit"
			FCB	$00
SO_P_CNG_TBL_		FCC	"P.Cng Tbl?"
			FCB	$00
SO_EFFECT_		FCC	"Effect "
			FCB	$00
SO_FULL_KBD_		FCC	"Full Kbd ?"
			FCB	$00
SO_EDIT			FCC	"EDIT"
			FCB	$00
SO_VOICE		FCC	"VOICE"
			FCB	$00
SO_EFFECT		FCC	"EFFECT"
			FCB	$00
SO_ERFORMANCE		FCC	"ERFORMANCE"
			FCB	$00

S_ON			FCC	"on"
			FCB	$00
S_OFF			FCC	"off"
			FCB	$00
S__OF			FCC	" of"
			FCB	$00
S__ON			FCC	" on"
			FCB	$00
S__POR			FCC	" Por"
			FCB	$00
S__SUS			FCC	" Sus"
			FCB	$00
S_NORM			FCC	"norm"
			FCB	$00
S_ALTR			FCC	"altr"
			FCB	$00
S_OMN			FCC	"omn"
			FCB	$00
S_VIB			FCC	"vib"
			FCB	$00
S_RATIO			FCC	"RATIO)"
			FCB	$00
S_FIX			FCC	"FIX)"
			FCB	$00
S_NAME			FCC	"Name :"
			FCB	$0E
MAD2E_via_dvec_a7ac	FCC	"   /	/   /	~"
			FCB	$13
MAD3F_via_dvec_a7ae	FCB	$7F
			FCC	"   /	/   /	"
			FCB	$14
S_P_UT			FCC	"P.UT"
			FCB	$00
S__ED			FCC	".ED"
			FCB	$00
S_LAY_SINGLE		FCC	"LAY SINGLE"
			FCB	$00
S_ERFORMANCE_MODE	FCB	SO_ERFORMANCE - SO__BASE
			FCC	" MODE"
			FCB	$00
S_PFM_STORE		FCC	"PFM Store	?"
			FCB	$00
S_UTILITY_MODE		FCC	"UTILITY MODE"
			FCB	$00
S_UTILITY		FCC	"UTILITY"
			FCB	$00
S_MASTER_VOLUME		FCC	"Master Volume"
			FCB	$00
S_1_2_3_4		FCC	"1  2  3  4"
			FCB	$00
S_LFO_EDIT		FCC	"LFO "
			FCB	SO_EDIT - SO__BASE
			FCB	$00
S_SENS_EDIT		FCC	"SENS "
			FCB	SO_EDIT - SO__BASE
			FCB	$00
S_FREQ			FCC	"FREQ."
			FCB	$00
S_FUNCTION		FCC	"FUNCTION"
			FCB	$00
S_UT			FCC	"UT"
			FCB	$00
S_RECALL_EDIT		FCC	"RECALL "
			FCB	SO_EDIT - SO__BASE
			FCB	$00
S_INIT_VOICE		FCC	"INIT "
			FCB	SO_VOICE - SO__BASE
			FCB	$00
MADD9			FCC	"MIDI CONTROL"
			FCB	$00
MADE6			FCC	"CASS CONTROL"
			FCB	$00
S_EDIT_EFFECT_1		FCB	SO_EDIT - SO__BASE
			FCC	" "
			FCB	SO_EFFECT - SO__BASE
			FCC	"1"
			FCB	$00
S_EDIT_EFFECT_2		FCB	SO_EDIT - SO__BASE
			FCC	" "
			FCB	SO_EFFECT - SO__BASE
			FCC	"2"
			FCB	$00
S_EDIT_EFFECT_3		FCB	SO_EDIT - SO__BASE
			FCC	" "
			FCB	SO_EFFECT - SO__BASE
			FCC	"3"
			FCB	$00
MAE02			FCC	"Chord"
			FCB	$02
MAE08			FCC	"MICRO TUNE"
			FCB	$00
MAE13			FCC	"MICRO	 OCT."
			FCB	$00
MAE20			FCC	"MICRO	 FULL"
			FCB	$00
MAE2D			FCC	"Init?"
			FCB	$03
S_KEY			FCC	"Key"
			FCB	$00
S__PGM			FCC	" PGM"
			FCB	$00
S__EQUALS__		FCC	" = "
			FCB	$00
S_INIT_P_CNG		FCC	"INIT P.CNG"
			FCB	$00
S_ERFORMANCE_EDIT	FCB	SO_ERFORMANCE - SO__BASE
			FCC	" "
			FCB	SO_EDIT - SO__BASE
			FCB	$00
S_VOICE_EDIT_		FCB	SO_VOICE - SO__BASE
			FCC	" "
			FCB	SO_EDIT - SO__BASE
			FCC	"?"
			FCB	$00
S_INIT__		FCC	"INIT  "
			FCB	$00
S_MAX_NOTES		FCC	"MAX NOTES"
			FCB	$00
S_RECEIVE_CH		FCC	"RECEIVE CH"
			FCB	$00
S_LIMIT_L		FCC	"LIMIT/L"
			FCB	$00
S_LIMIT_H		FCC	"LIMIT/H"
			FCB	$00
S_INST_DETUNE		FCC	"INST DETUNE"
			FCB	$00
S_NOTE_SHIFT		FCC	"NOTE SHIFT"
			FCB	$00
S_OUT_ASSIGN		FCC	"OUT ASSIGN"
			FCB	$00
S_LFO_SELECT		FCC	"LFO SELECT"
			FCB	$00
S_MICTUN		FCC	"MICTUN="
			FCB	$01

S_SHARPS		FCC	" CC# DD# E FF# GG# AA# B"
S_FLATS			FCC	" CDb DEb E FGb GAb ABb B"

S_EQUAL			FCC	"Equal"
			FCB	$00
S_PURE_MAJOR		FCC	"Pure(major)"
			FCB	$01
S_PURE_MINOR		FCC	"Pure(minor)"
			FCB	$01
S_MEAN_TONE		FCC	"Mean tone"
			FCB	$01
S_PYTHAGOREAN		FCC	"Pythagorean"
			FCB	$01
S_WERCKMEISTER		FCC	"Werckmeister"
			FCB	$00
S_KIRNBERGER		FCC	"Kirnberger"
			FCB	$00
S_VALLOTTI_YOUNG		FCC	"Vallotti&young"
			FCB	$00
S_1_4_SHIFT_EQUAL	FCC	"1/4 Shift eql"
			FCB	$00
S_1_4_TONE		FCC	"1/4 Tone"
			FCB	$00
S_1_8_TONE		FCC	"1/8 Tone"
			FCB	$00

S_PFM_SINGLE		FCC	"singl"
			FCB	$00
S_PFM_DUAL		FCC	"dual"
			FCB	$00
S_PFM_SPLIT		FCC	"split"
			FCB	$00
S_PFM_MONO8		FCC	"mono8"
			FCB	$00
S_PFM_POLY4		FCC	"poly4"
			FCB	$00

F_AF7D			LDAB	M7772
			ANDB	#$04
			BEQ	F_AF91
			CMPA	#$18
			BCS	ZAF89
			CLRA
ZAF89			LDAB	#$46
			JSR	PUTCHAR
			INCA
			BRA	ZAFAA
F_AF91			CMPA	#$A0
			BCS	ZAF96
			CLRA
ZAF96			LDAB	#$49
			SUBA	#$20
			BMI	ZAFA5
			LDAB	#$41
ZAF9E			SUBA	#$20
			BMI	ZAFA5
			INCB
			BRA	ZAF9E
ZAFA5			JSR	PUTCHAR
			ADDA	#$21
ZAFAA			LDAB	#$01
			JSR	F_9BD1
			RTS

F_AFB0			LDAB	#$45
			JSR	F_9CBF
			JSR	PUTCHAR
			LDX	#M776E
ZAFBB			LDAA	,X
			ANDA	#$01
			JSR	F_9BD7
			INX
			CPX	#M7772
			BNE	ZAFBB
			RTS

F_AFC9			LDX	#M6E3B
ZAFCC			LDAB	,X
			JSR	PUTCHAR
			INX
			CPX	#M6E45
			BNE	ZAFCC
			RTS

F_AFD8			JSR	F_B53E
			LDAB	#$4D
F_AFDD			ABX
			CLRB
ZAFDF			PSHB
			LDAB	,X
			JSR	PUTCHAR
			INX
			PULB
			INCB
			CMPB	#$0A
			BNE	ZAFDF
			RTS

F_AFED			TST	M7788
			BNE	ZB029
			LDAB	M7774
			BNE	ZAFFA
ZAFF7			JMP	ZB079
ZAFFA			CMPB	#$05
			BEQ	ZAFF7
			CMPB	#$06
			BEQ	ZB006
			CMPB	#$08
			BNE	ZB013
ZB006			LDX	#M7DB1
			STX	M00A7
			LDX	#S_1_2_3_4
			JSR	PUTSTRX
			BRA	ZB079
ZB013			LDX	#M7DB2
			STX	M00A7
			LDX	#S_ALG
			JSR	PUTSTRX
			JSR	F_B53E
			LDAA	$34,X
			INCA
			JSR	F_9BD7
			BRA	ZB079
ZB029			LDX	#M7DB1
			STX	M00A7
			LDAB	M7774
			JSR	JMPOFF1
DB034			FCB	$45,$02,$12,$03,$15,$04,$18,$05,$3D,$07,$19,$08,$39
			FCB	$09,$15,$0A,$18,$0B,$33,$00
			LDX	#S_LFO_EDIT
			BRA	ZB076
			LDX	#S_SENS_EDIT
			BRA	ZB076
			LDX	#S_FREQ
			BRA	ZB061
			LDX	#S_1_2_3_4
			BRA	ZB076
			LDX	#S_FUNCTION
			BRA	ZB076
ZB061			JSR	PUTSTRX
			LDX	#$4F50
			STX	M7DB8
			LDAA	M777B
			ANDA	#$03
			ADDA	#$31
			STAA	M7DBA
			BRA	ZB079
ZB076			JSR	PUTSTRX
ZB079			RTS

F_B07A			TST	M7788
			BNE	ZB0AC
			TST	>M00A5
			BEQ	ZB0A4
			LDX	#S_UT
			JSR	PUTSTRX
			LDX	#M7DAF
			STX	M00A7
			LDAB	M7774
			CMPB	#$1D
			BEQ	ZB09F
			CMPB	#$1E
			BNE	ZB0A4
			LDX	#S_RECALL_EDIT
			BRA	ZB0A7
ZB09F			LDX	#S_INIT_VOICE
			BRA	ZB0A7
ZB0A4			LDX	#S_UTILITY_MODE
ZB0A7			JSR	PUTSTRX
			BRA	ZB122
ZB0AC			LDX	#S_UT
			JSR	PUTSTRX
			LDX	#M7DAF
			STX	M00A7
			LDAB	M7788
			CMPB	#$02
			BCC	ZB123
			LDAB	M7774
			JSR	JMPOFF1
DB0C4			FCB	$5E,$15,$0A,$16,$5A,$18,$12,$19,$14,$1D,$54,$00
JB0D0			TST	>M00A5
			BEQ	ZB0D9
			LDAB	#$0A
			BRA	ZB0E2
ZB0D9			CLRB
			BRA	ZB0E2
			LDAB	#$01
			BRA	ZB0E2
			SUBB	#$17
ZB0E2			LDX	#DVEC_B14D
ZB0E5			ASLB
			ABX
			LDX	,X
			JSR	PUTSTRX
			CMPB	#$01
			BEQ	ZB11F
			CMPB	#$02
			BEQ	ZB110
			CMPB	#$03
			BNE	ZB122
			LDAA	M778A
			CMPA	#$01
			BCS	ZB122
			CMPA	#$05
			BCC	ZB122
			LDX	#M7DB8
			STX	M00A7
			LDX	#S_KEY
			JSR	PUTSTRX
			BRA	ZB122
ZB110			LDX	#M7DB8
			STX	M00A7
			LDAB	M7789
			ADDB	#$3C
			JSR	F_B43F
			BRA	ZB122
ZB11F			JSR	F_B47B
ZB122			RTS
ZB123			LDAB	M7774
			CMPB	#$1B
			BNE	ZB12E
			LDAB	#$06
			BRA	ZB0E2
ZB12E			CMPB	#$1C
			BEQ	ZB138
			CMPB	#$15
			BNE	ZB122
			BRA	JB0D0
ZB138			LDAB	M7789
			ANDB	#$01
			BNE	ZB149
			LDAB	#$07
			TST	M7789
			BEQ	ZB147
			INCB
ZB147			BRA	ZB0E2
ZB149			LDAB	#$09
			BRA	ZB0E2

; string vector table
DVEC_B14D		FDB     MADD9
			FDB     MADE6
			FDB     S_EDIT_EFFECT_1
			FDB     S_EDIT_EFFECT_2
			FDB     S_EDIT_EFFECT_3
			FDB     MAE08
			FDB     MAE02
			FDB     MAE13
			FDB     MAE20
			FDB     MAE2D
			FDB     S_INIT_P_CNG

F_B163			LDAB	#$50
			JSR	F_9CD0
			JSR	PUTCHAR
			LDX	#S__ED
			JSR	PUTSTRX
			LDAB	M7774
			JSR	JMPOFF1
DB177			FCB	$42,$28,$10,$29,$14,$2A,$27,$2B,$14,$30,$38,$31,$14
			FCB	$34,$04,$36,$32,$00

			CLRB
			LDX	#M7DAC
			BRA	ZB19C
			LDAB	#$01
			BRA	ZB199
			SUBB	#$29
			BRA	ZB199
			SUBB	#$2A
ZB199			LDX	#M7DB0
ZB19C			STX	M00A7
			LDX	#DVEC_B1BA
			JMP	ZB0E5
			LDX	#M7DB0
			STX	M00A7
			LDAA	M778C
			CMPA	#$08
			BCS	ZB1B1
			CLRA
ZB1B1			JSR	F_B4E2
			LDAB	#$4D
			JSR	F_AFDD
			RTS

; string vector table
DVEC_B1BA		FDB     S_ERFORMANCE_EDIT
			FDB     S_MAX_NOTES
			FDB     S_RECEIVE_CH
			FDB     S_LIMIT_L
			FDB     S_LIMIT_H
			FDB     S_INST_DETUNE
			FDB     S_NOTE_SHIFT
			FDB     S_OUT_ASSIGN
			FDB     S_LFO_SELECT
			FDB     S_MICTUN

F_B1CE			LDX	#S_P_UT
			JSR	PUTSTRX
			LDX	#M7DB0
			STX	M00A7
			LDAB	M7774
			CMPB	#$3C
			BNE	ZB1E5
			LDX	#S_VOICE_EDIT_
			BRA	ZB212
ZB1E5			CMPB	#$3D
			BNE	ZB217
			TST	>M00A5
			BEQ	ZB200
			LDX	#S_INIT__
			JSR	PUTSTRX
ZB1F4			LDAB	M777E
			ASLB
			LDX	#DVEC_STD_PFM_NAMES
			ABX
			LDX	,X
			BRA	ZB212
ZB200			LDX	#M7DAD
			STX	M00A7
			LDX	#S_UTILITY
			JSR	PUTSTRX
			LDX	#M7DB6
			STX	M00A7
			BRA	ZB1F4
ZB212			JSR	PUTSTRX
			BRA	ZB221
ZB217			LDX	#M7DAD
			STX	M00A7
			LDX	#S_UTILITY
			BRA	ZB212
ZB221			RTS

DVEC_STD_PFM_NAMES	FDB	S_PFM_SINGLE
			FDB	S_PFM_DUAL
			FDB	S_PFM_SPLIT
			FDB	S_PFM_MONO8
			FDB	S_PFM_POLY4

F_B22C			PSHA
			LDAB	#$40
			LDX	#CG_B2E0
ZB232			JSR	SET_CGCHAR
			CMPB	#$50
			BNE	ZB232
			PULB
			CMPB	#$08
			BCS	ZB23F
			CLRB
ZB23F			JSR	JMPOFFB
DB242			FCB	$08,$15,$27,$39,$53,$5F,$74,$7B

JB24A			LDX	#M7DC1
			STX	M00A7
			LDX	#S_ALG_1
			JSR	PUTSTRX
			JMP	ZB2DF
			LDD	#$3300
			STD	M7DB3
			LDX	#M7DC3
			STX	M00A7
			LDX	#S_ALG_2
			JSR	PUTSTRX
			BRA	ZB2DF
			LDD	#$3400
			STD	M7DB5
			LDX	#M7DC3
			STX	M00A7
			LDX	#S_ALG_3
			JSR	PUTSTRX
			BRA	ZB2DF
			LDX	#M7DB3
			STX	M00A7
			LDX	#S_ALG_4
			JSR	PUTSTRX
			CLR	M7DB6
ZB28C			LDX	#M7DC5
			STX	M00A7
			LDX	#S_ALG_5
			JSR	PUTSTRX
			BRA	ZB2DF
			LDX	#M7DB5
			STX	M00A7
			LDX	#S_ALG_6
			JSR	PUTSTRX
			BRA	ZB28C
			LDD	#$0134
			STD	M7DB4
			CLR	M7DB6
ZB2AF			LDX	#M7DC3
			STX	M00A7
			LDX	#S_ALG_7
			JSR	PUTSTRX
			BRA	ZB2DF
			LDD	#$0134
			STD	M7DB8
			BRA	ZB2AF
			LDX	#M7DB3
			STX	M00A7
			LDX	#S_ALG_7
			JSR	PUTSTRX
			LDAB	#$34
			STAB	M7DB9
			LDX	#M7DC3
			STX	M00A7
			LDX	#S_PLUS_MINUS
			JSR	PUTSTRX
ZB2DF			RTS

; CGCHAR
CG_B2E0			FCB	%00000000
			FCB	%00000000
			FCB	%00010000
			FCB	%00001001
			FCB	%00000101
			FCB	%00000001
			FCB	%00001111
			FCB	%00000000
; CGCHAR
			FCB	%00000000
			FCB	%00000000
			FCB	%00000001
			FCB	%00010010
			FCB	%00010100
			FCB	%00010000
			FCB	%00011110
			FCB	%00000000

S_ALG_1			FCC	"4~3~2~1~"
			FCB	$00
S_ALG_2			FCC	"4~2~1~"
			FCB	$00
S_ALG_3			FCC	"3~2~1~"
			FCB	$00
S_ALG_4			FCC	"4~3"
			FCB	$00
S_ALG_5			FCC	"2~1~"
			FCB	$00
S_ALG_6			FCC	"4~3~"
			FCB	$00
S_ALG_7			FCC	"1 2 3"
			FCB	$00
S_PLUS_MINUS		FCC	"+-+-+-+"
			FCB	$00

SET_CGCHAR_SET		LDAB	#$40
			LDX	#D_CGCHAR_SET
ZB328			BSR	SET_CGCHAR
			CMPB	#$80
			BNE	ZB328
			RTS
SET_CGCHAR		CLRA
ZB330			PSHA
			LDAA	,X
			JSR	LCD_DO_CMD_DATA
			INX
			INCB
			PULA
			INCA
			CMPA	#$08
			BNE	ZB330
			RTS
D_CGCHAR_SET
; CGCHAR 0
			FCB	%00000100
			FCB	%00001010
			FCB	%00010001
			FCB	%00010000
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
; CGCHAR 1
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
			FCB	%00000001
			FCB	%00010001
			FCB	%00001010
			FCB	%00000100
			FCB	%00000000

; CGCHAR 2
			FCB	%00000100
			FCB	%00000100
			FCB	%00001010
			FCB	%00010001
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
; CGCHAR 3
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
			FCB	%00010001
			FCB	%00001010
			FCB	%00000100
			FCB	%00000100
			FCB	%00000000
; CGCHAR 4
			FCB	%00001000
			FCB	%00010100
			FCB	%00010100
			FCB	%00010101
			FCB	%00000101
			FCB	%00000101
			FCB	%00000010
			FCB	%00000000
; CGCHAR 5
			FCB	%00001000
			FCB	%00001000
			FCB	%00010100
			FCB	%00010101
			FCB	%00000101
			FCB	%00000010
			FCB	%00000010
			FCB	%00000000
; CGCHAR 6
			FCB	%00001010
			FCB	%00010101
			FCB	%00010101
			FCB	%00010101
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
; CGCHAR 7
			FCB	%00001010
			FCB	%00001010
			FCB	%00010101
			FCB	%00010101
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000
			FCB	%00000000

F_B37F			LDX	#CG_B386
			LDAB	#$40
			BRA	SET_CGCHAR
; CGCHAR 0
CG_B386			FCB	%00011111
			FCB	%00001010
			FCB	%00001010
			FCB	%00001010
			FCB	%00001010
			FCB	%00001010
			FCB	%00011111
			FCB	%00000000

F_B38E			LDX	#CG_B398
			LDAB	#$40
			BSR	SET_CGCHAR
			JMP	SET_CGCHAR

CG_B398			FCB	%00000010
			FCB	%00000101
			FCB	%00000001
			FCB	%00011001
			FCB	%00000010
			FCB	%00000100
			FCB	%00000111
			FCB	%00000000

			FCB	%00000010
			FCB	%00000110
			FCB	%00000010
			FCB	%00011010
			FCB	%00000010
			FCB	%00000010
			FCB	%00000111
			FCB	%00000000

; B -> Command, A -> Data

LCD_DO_CMD_DATA 	JSR	LCD_WAIT
			STAB	LCD_CMD
			JSR	LCD_WAIT
			STAA	LCD_DATA
			RTS

F_B3B5			TST	>M00A3
			BNE	ZB3BD
			JSR	F_B3E9
ZB3BD			LDAA	M776D
			COMA
			LSRA
			JSR	F_B4DA
			CLRB
ZB3C6			SUBA	#$05
			BMI	ZB3CD
			INCB
			BRA	ZB3C6
ZB3CD			ADDA	#$05
			PSHA
			LDX	#M7DBB
			STX	M00A7
			TBA
			BEQ	ZB3E0
			LDAB	#$04
ZB3DA			JSR	PUTCHAR
			DECA
			BNE	ZB3DA
ZB3E0			PULB
			TSTB
			BEQ	ZB3E8
			DECB
			JSR	PUTCHAR
ZB3E8			RTS

F_B3E9			LDAB	#$40
			LDAA	#$20
ZB3ED			PSHB
			ANDB	#$07
			BNE	ZB3F5
			LSRA
			ORAA	#$10
ZB3F5			CMPB	#$07
			PULB
			BNE	ZB3FE
			PSHA
			CLRA
			BRA	ZB3FF
ZB3FE			PSHA
ZB3FF			BSR	LCD_DO_CMD_DATA
			PULA
			INCB
			CMPB	#$68
			BNE	ZB3ED
			RTS

F_B408			LDAB	#$40
ZB40A			PSHB
			COMB
			ANDB	#$38
			LSRB
			LSRB
			LSRB
			DECB
			STAB	M00AB
			PULB
			CLRA
ZB416			PSHA
			CMPA	#$07
			BEQ	ZB41F
			CMPA	M00AB
			BCC	ZB422
ZB41F			CLRA
			BRA	ZB424
ZB422			LDAA	#$1F
ZB424			BSR	LCD_DO_CMD_DATA
			INCB
			PULA
			INCA
			CMPA	#$08
			BNE	ZB416
			CMPB	#$78
			BNE	ZB40A
			RTS

F_B432			LDX	#S_ON
			TSTA
			BNE	ZB43B
			LDX	#S_OFF
ZB43B			JSR	PUTSTRX
			RTS

F_B43F			PSHB
			JSR	F_B38E
			PULB
			LDX	M00A7
			LDAA	#$2D
ZB448			INCA
			SUBB	#$0C
			BCC	ZB448
			CMPA	#$30
			BCC	ZB453
			SUBA	#$2E
ZB453			STAA	$02,X
			ADDB	#$0C
			ASLB
			PSHX
			LDX	#S_SHARPS
			ABX
			LDD	,X
			PULX
			STD	,X
			RTS

F_B463			SUBA	#$40
F_B465			BHI	ZB46D
			BMI	ZB471
			LDAB	#$20
			BRA	ZB474
ZB46D			LDAB	#$2B
			BRA	ZB474
ZB471			NEGA
			LDAB	#$2D
ZB474			JSR	PUTCHAR
			CLRB
			JMP	F_9BD1

F_B47B			LDAA	M6E37
			BNE	ZB485
			LDX	#S_OCT
			BRA	ZB48C
ZB485			CMPA	#$02
			BCC	ZB491
			LDX	#S_FULL
ZB48C			JSR	PUTSTRX
			BRA	ZB4CB
ZB491			DECA
			CMPA	#$0A
			BCC	ZB4C7
			PSHA
			JSR	F_9BD7
			PULA
			CMPA	#$02
			BCS	ZB4CB
			CMPA	#$06
			BCC	ZB4CB
			LDAB	M6E3A
			LDAA	M6E37
			CMPA	#$04
			BNE	ZB4BB
			ADDB	#$09
			CMPB	#$0C
			BCS	ZB4B5
			SUBB	#$0C
ZB4B5			ASLB
			LDX	#S_SHARPS
			BRA	ZB4BF
ZB4BB			ASLB
			LDX	#S_FLATS
ZB4BF			ABX
			LDD	,X
			STD	M7DB9
			BRA	ZB4CB
ZB4C7			CLRB
			JSR	F_9BD1
ZB4CB			RTS

S_OCT			FCC	"Oct."
			FCB	$00
S_FULL			FCC	"Full"
			FCB	$00

F_B4D6			LDAB	#200
			MUL
			RTS

F_B4DA			LDAB	#142
			MUL
			RTS

F_B4DE			LDAB	#38
			MUL
			RTS

F_B4E2			LDAB	#$6E
			MUL
			ADDD	#M6A67
			XGDX
			RTS

DB4EA			FCB	$00,$01,$02,$03,$04,$05,$06,$07,$08,$09,$0C,$0A,$0B
			FCB	$10,$0D,$0E,$14,$0F,$11,$18,$12,$13,$1C,$15,$16,$20
			FCB	$19,$17,$24,$1A,$1D,$28,$1B,$1E,$2C,$21,$30,$1F,$22
			FCB	$25,$34,$23,$38,$29,$26,$3C,$2D,$27,$2A,$31,$2E,$2B
			FCB	$35,$32,$2F,$39,$36,$33,$3D,$3A,$37,$3E,$3B,$3F
DB52A			FCB	$03,$01,$02,$00

F_B52E			LDAB	M777B
			LDAA	#$0D
F_B533			LDX	#DB52A
			ABX
			LDAB	,X
			MUL
			BSR	F_B53E
			ABX
			RTS

F_B53E			XGDX
			LDAB	M778B
			LDAA	#$6E
			MUL
			ADDD	#M6A67
			XGDX
			RTS

			INCLUDE	"inc/jmpoff.asm"

FOREVER 		BRA	FOREVER

			ORG	$D1C0

			INCLUDE	"inc/voice.asm"
			INCLUDE	"inc/pfm.asm"

			ORG	$FFEA

			INCLUDE	"inc/vecs.asm"
